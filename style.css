:root {
    /* --- Theme Variables --- */
     /* Blue Theme (Original - Base) */
    --main-bg-color-blue: #48B4F6; --lighter-bg-blue: #6ADDEF; --button-bg-color-blue: #6ADDEF;
    --active-green-blue: #90EE90; --remove-red-blue: #FF6B6B; --pending-orange-blue: #FFA500;
    --delivered-green-blue: #32CD32; --preparing-yellow-blue: #FFD700; --text-color-dark-blue: #000;
    --text-color-light-blue: #fff; --border-color-blue: #000;
    --body-outer-bg-blue: #282828;

    /* Green Theme (Refined) */
    --main-bg-color-green: #4CAF50;    /* Slightly richer green */
    --lighter-bg-green: #81C784;      /* Softer light green */
    --button-bg-color-green: #81C784;
    --active-green-green: #FFEB3B;     /* Vibrant Yellow for contrast */
    --remove-red-green: #ef5350;       /* Slightly softer red */
    --pending-orange-green: #FFA726;   /* Clear Orange */
    --delivered-green-green: #66BB6A;  /* Complementary delivered green */
    --preparing-yellow-green: #FFEE58; /* Lighter preparing yellow */
    --text-color-dark-green: #000;     /* Black text mostly works */
    --text-color-light-green: #fff;
    --border-color-green: #2E7D32;     /* Darker green border */
    --body-outer-bg-green: #1B5E20;     /* Dark forest green */

    /* Purple Theme (Refined) */
    --main-bg-color-purple: #9C27B0;   /* Standard Material Purple */
    --lighter-bg-purple: #CE93D8;     /* Lighter lavender */
    --button-bg-color-purple: #CE93D8;
    --active-green-purple: #76FF03;    /* Bright Lime green active */
    --remove-red-purple: #F44336;      /* Standard Material Red */
    --pending-orange-purple: #FF9800;  /* Standard Material Orange */
    --delivered-green-purple: #4CAF50; /* Standard Material Green */
    --preparing-yellow-purple: #FFEB3B;/* Standard Material Yellow */
    --text-color-dark-purple: #000;    /* Black text */
    --text-color-light-purple: #fff;   /* White text */
    --border-color-purple: #4A148C;    /* Deep purple border */
    --body-outer-bg-purple: #311B92;    /* Deep indigo/purple outer */

    /* Theme 1: White & Blue (Light Blue) */
    --main-bg-color-light-blue: #ffffff; --lighter-bg-light-blue: #E3F2FD; --button-bg-color-light-blue: #E3F2FD;
    --active-green-light-blue: #66BB6A; --remove-red-light-blue: #EF5350; --pending-orange-light-blue: #FFA726;
    --delivered-green-light-blue: #4CAF50; --preparing-yellow-light-blue: #FFEE58; --text-color-dark-light-blue: #0D47A1; /* Dark Blue Text */
    --text-color-light-light-blue: #0D47A1; /* Dark Blue Text for buttons */ --border-color-light-blue: #90A4AE; /* Blue Grey Border */
    --body-outer-bg-light-blue: #ECEFF1; /* Very Light Grey Outer */
    /* Colors for Light Blue Swatch */
    --swatch-light-blue-1: #ffffff;
    --swatch-light-blue-2: #90CAF9; /* A visible light blue */

    /* Theme 2: White & Black (Monochrome Light) */
    --main-bg-color-mono-light: #ffffff; --lighter-bg-mono-light: #f5f5f5; --button-bg-color-mono-light: #f5f5f5;
    --active-green-mono-light: #4CAF50; --remove-red-mono-light: #f44336; --pending-orange-mono-light: #ff9800;
    --delivered-green-mono-light: #8BC34A; --preparing-yellow-mono-light: #FFEB3B; --text-color-dark-mono-light: #000000; /* Black Text */
    --text-color-light-mono-light: #000000; /* Black Text for buttons */ --border-color-mono-light: #000000; /* Black Border */
    --body-outer-bg-mono-light: #e0e0e0; /* Light Grey Outer */
    /* Colors for Monochrome Light Swatch */
    --swatch-mono-light-1: #ffffff;
    --swatch-mono-light-2: #000000;

    /* Theme 3: Dark Grey (Refined Dark) */
    --main-bg-color-dark-grey: #37474F; --lighter-bg-dark-grey: #546E7A; --button-bg-color-dark-grey: #546E7A;
    --active-green-dark-grey: #80CBC4; --remove-red-dark-grey: #EF9A9A; --pending-orange-dark-grey: #FFCC80;
    --delivered-green-dark-grey: #A5D6A7; --preparing-yellow-dark-grey: #FFF59D; --text-color-dark-dark-grey: #ECEFF1; /* Light Text */
    --text-color-light-dark-grey: #ffffff; /* White Text Title */ --border-color-dark-grey: #78909C; /* Lighter Grey Border */
    --body-outer-bg-dark-grey: #263238; /* Very Dark Grey Outer */

    /* Theme 4: Dark Blue (Night) */
    --main-bg-color-night: #0d1b2a; --lighter-bg-night: #1b263b; --button-bg-color-night: #1b263b;
    --active-green-night: #00A896; --remove-red-night: #D00000; --pending-orange-night: #FF8C00;
    --delivered-green-night: #007F5F; --preparing-yellow-night: #FFBA08; --text-color-dark-night: #E0E1DD; /* Off-white text */
    --text-color-light-night: #FFFFFF; /* White Text Title */ --border-color-night: #415a77; /* Mid Blue Border */
    --body-outer-bg-night: #03071e; /* Almost Black Outer */

    /* Theme 5: Black & White (Monochrome Dark) */
    --main-bg-color-mono-dark: #000000;         /* Black background */
    --lighter-bg-mono-dark: #212121;          /* Dark grey for elements */
    --button-bg-color-mono-dark: #212121;
    --active-green-mono-dark: #ffffff;         /* White for active/highlight */
    --remove-red-mono-dark: #bdbdbd;           /* Medium grey for remove */
    --pending-orange-mono-dark: #9e9e9e;       /* Darker grey for pending */
    --delivered-green-mono-dark: #ffffff;      /* White for delivered status button */
    --preparing-yellow-mono-dark: #ffffff;     /* White for preparing status button */
    --text-color-dark-mono-dark: #f5f5f5;      /* Very light grey text */
    --text-color-light-mono-dark: #ffffff;     /* White text for titles/buttons */
    --border-color-mono-dark: #757575;         /* Mid-grey border */
    --body-outer-bg-mono-dark: #121212;         /* Very dark grey outer bg */
    /* Colors for Monochrome Dark Swatch */
    --swatch-mono-dark-1: #000000;
    --swatch-mono-dark-2: #ffffff;

    /* ADDED: Theme 6: Yellow */
    --main-bg-color-yellow: #FFC107;   /* Bright Yellow */
    --lighter-bg-yellow: #FFD54F;    /* Lighter Yellow */
    --button-bg-color-yellow: #FFD54F;
    --active-green-yellow: #7CB342;   /* Lime Green */
    --remove-red-yellow: #F4511E;     /* Deep Orange/Red */
    --pending-orange-yellow: #FB8C00;  /* Orange */
    --delivered-green-yellow: #558B2F; /* Darker Lime Green */
    --preparing-yellow-yellow: #FFEE58;/* Light Yellow */
    --text-color-dark-yellow: #212121; /* Very Dark Grey/Black */
    --text-color-light-yellow: #000000;/* Black */
    --border-color-yellow: #FFA000;   /* Amber */
    --body-outer-bg-yellow: #F57F17;   /* Darker Yellow/Orange */
    /* Colors for Yellow Swatch */
    --swatch-yellow-1: #FFC107;
    --swatch-yellow-2: #FFA000;

    /* ADDED: Theme 7: Orange */
    --main-bg-color-orange: #FF9800;   /* Material Orange */
    --lighter-bg-orange: #FFB74D;    /* Lighter Orange */
    --button-bg-color-orange: #FFB74D;
    --active-green-orange: #AED581;   /* Light Green */
    --remove-red-orange: #E57373;     /* Light Red */
    --pending-orange-orange: #FFB74D;  /* Lighter Orange for contrast */
    --delivered-green-orange: #81C784; /* Complementary Green */
    --preparing-yellow-orange: #FFF176; /* Light Yellow */
    --text-color-dark-orange: #000000; /* Black */
    --text-color-light-orange: #FFFFFF;/* White */
    --border-color-orange: #F57C00;   /* Darker Orange */
    --body-outer-bg-orange: #E65100;   /* Deep Orange */
    /* Colors for Orange Swatch */
    --swatch-orange-1: #FF9800;
    --swatch-orange-2: #F57C00;


     /* Aliases - Initially Point to Blue Theme */
    --main-bg-color: var(--main-bg-color-blue); --lighter-blue-bg: var(--lighter-bg-blue); --button-bg-color: var(--button-bg-color-blue);
    --active-green: var(--active-green-blue); --remove-red: var(--remove-red-blue); --pending-orange: var(--pending-orange-blue);
    --delivered-green: var(--delivered-green-blue); --preparing-yellow: var(--preparing-yellow-blue); --text-color-dark: var(--text-color-dark-blue);
    --text-color-light: var(--text-color-light-blue); --border-color: var(--border-color-blue);
    --body-outer-bg: var(--body-outer-bg-blue); /* Alias for outer bg */

    /* Sizes & Radii */
    --screen-min-height: 600px; --screen-border-radius: 35px; --element-border-radius: 10px;
    --pill-border-radius: 50px; --border-thickness: 2px;
    /* Transitions */
    --transition-speed: 0.3s; --fast-transition-speed: 0.15s; --view-change-speed: 0.4s;
    --lang-change-speed: 0.3s;
    /* Fonts */
    --font-en: 'Nunito', sans-serif; --font-ar: 'Cairo', sans-serif;

    /* FIXED Status Colors (Independent of theme) */
    --status-pending-bg: #FFA500;  /* Orange */
    --status-pending-text: #000000; /* Black */
    --status-preparing-bg: #FFD700; /* Gold */
    --status-preparing-text: #000000;/* Black */
    --status-delivered-bg: #32CD32; /* LimeGreen */
    --status-delivered-text: #ffffff;/* White */
}

/* Apply Aliases based on theme attribute */
body[data-theme="green"] {
    --main-bg-color: var(--main-bg-color-green); --lighter-blue-bg: var(--lighter-bg-green); --button-bg-color: var(--button-bg-color-green);
    --active-green: var(--active-green-green); --remove-red: var(--remove-red-green); --pending-orange: var(--pending-orange-green);
    --delivered-green: var(--delivered-green-green); --preparing-yellow: var(--preparing-yellow-green); --text-color-dark: var(--text-color-dark-green);
    --text-color-light: var(--text-color-light-green); --border-color: var(--border-color-green);
    --body-outer-bg: var(--body-outer-bg-green);
}
body[data-theme="purple"] {
    --main-bg-color: var(--main-bg-color-purple); --lighter-blue-bg: var(--lighter-bg-purple); --button-bg-color: var(--button-bg-color-purple);
    --active-green: var(--active-green-purple); --remove-red: var(--remove-red-purple); --pending-orange: var(--pending-orange-purple);
    --delivered-green: var(--delivered-green-purple); --preparing-yellow: var(--preparing-yellow-purple); --text-color-dark: var(--text-color-dark-purple);
    --text-color-light: var(--text-color-light-purple); --border-color: var(--border-color-purple);
    --body-outer-bg: var(--body-outer-bg-purple);
}
 body[data-theme="light-blue"] {
    --main-bg-color: var(--main-bg-color-light-blue); --lighter-blue-bg: var(--lighter-bg-light-blue); --button-bg-color: var(--button-bg-color-light-blue);
    --active-green: var(--active-green-light-blue); --remove-red: var(--remove-red-light-blue); --pending-orange: var(--pending-orange-light-blue);
    --delivered-green: var(--delivered-green-light-blue); --preparing-yellow: var(--preparing-yellow-light-blue); --text-color-dark: var(--text-color-dark-light-blue);
    --text-color-light: var(--text-color-light-light-blue); --border-color: var(--border-color-light-blue);
    --body-outer-bg: var(--body-outer-bg-light-blue);
}
body[data-theme="mono-light"] {
    --main-bg-color: var(--main-bg-color-mono-light); --lighter-blue-bg: var(--lighter-bg-mono-light); --button-bg-color: var(--button-bg-color-mono-light);
    --active-green: var(--active-green-mono-light); --remove-red: var(--remove-red-mono-light); --pending-orange: var(--pending-orange-mono-light);
    --delivered-green: var(--delivered-green-mono-light); --preparing-yellow: var(--preparing-yellow-mono-light); --text-color-dark: var(--text-color-dark-mono-light);
    --text-color-light: var(--text-color-light-mono-light); --border-color: var(--border-color-mono-light);
    --body-outer-bg: var(--body-outer-bg-mono-light);
}
body[data-theme="dark-grey"] {
    --main-bg-color: var(--main-bg-color-dark-grey); --lighter-blue-bg: var(--lighter-bg-dark-grey); --button-bg-color: var(--button-bg-color-dark-grey);
    --active-green: var(--active-green-dark-grey); --remove-red: var(--remove-red-dark-grey); --pending-orange: var(--pending-orange-dark-grey);
    --delivered-green: var(--delivered-green-dark-grey); --preparing-yellow: var(--preparing-yellow-dark-grey); --text-color-dark: var(--text-color-dark-dark-grey);
    --text-color-light: var(--text-color-light-dark-grey); --border-color: var(--border-color-dark-grey);
    --body-outer-bg: var(--body-outer-bg-dark-grey);
}
body[data-theme="night"] {
    --main-bg-color: var(--main-bg-color-night); --lighter-blue-bg: var(--lighter-bg-night); --button-bg-color: var(--button-bg-color-night);
    --active-green: var(--active-green-night); --remove-red: var(--remove-red-night); --pending-orange: var(--pending-orange-night);
    --delivered-green: var(--delivered-green-night); --preparing-yellow: var(--preparing-yellow-night); --text-color-dark: var(--text-color-dark-night);
    --text-color-light: var(--text-color-light-night); --border-color: var(--border-color-night);
    --body-outer-bg: var(--body-outer-bg-night);
}
body[data-theme="mono-dark"] {
    --main-bg-color: var(--main-bg-color-mono-dark); --lighter-blue-bg: var(--lighter-bg-mono-dark); --button-bg-color: var(--button-bg-color-mono-dark);
    --active-green: var(--active-green-mono-dark); --remove-red: var(--remove-red-mono-dark); --pending-orange: var(--pending-orange-mono-dark);
    --delivered-green: var(--delivered-green-mono-dark); --preparing-yellow: var(--preparing-yellow-mono-dark); --text-color-dark: var(--text-color-dark-mono-dark);
    --text-color-light: var(--text-color-light-mono-dark); --border-color: var(--border-color-mono-dark);
    --body-outer-bg: var(--body-outer-bg-mono-dark);
}
/* ADDED: Yellow Theme Application */
body[data-theme="yellow"] {
    --main-bg-color: var(--main-bg-color-yellow); --lighter-blue-bg: var(--lighter-bg-yellow); --button-bg-color: var(--button-bg-color-yellow);
    --active-green: var(--active-green-yellow); --remove-red: var(--remove-red-yellow); --pending-orange: var(--pending-orange-yellow);
    --delivered-green: var(--delivered-green-yellow); --preparing-yellow: var(--preparing-yellow-yellow); --text-color-dark: var(--text-color-dark-yellow);
    --text-color-light: var(--text-color-light-yellow); --border-color: var(--border-color-yellow);
    --body-outer-bg: var(--body-outer-bg-yellow);
}
/* ADDED: Orange Theme Application */
body[data-theme="orange"] {
    --main-bg-color: var(--main-bg-color-orange); --lighter-blue-bg: var(--lighter-bg-orange); --button-bg-color: var(--button-bg-color-orange);
    --active-green: var(--active-green-orange); --remove-red: var(--remove-red-orange); --pending-orange: var(--pending-orange-orange);
    --delivered-green: var(--delivered-green-orange); --preparing-yellow: var(--preparing-yellow-orange); --text-color-dark: var(--text-color-dark-orange);
    --text-color-light: var(--text-color-light-orange); --border-color: var(--border-color-orange);
    --body-outer-bg: var(--body-outer-bg-orange);
}


html { font-size: 16px; scroll-behavior: smooth; height: 100%; box-sizing: border-box; }
*, *:before, *:after { box-sizing: inherit; }

/* DEFAULT BODY STYLES (LTR) */
body {
    background-color: var(--body-outer-bg); /* Use theme variable */
    display: flex; justify-content: center; align-items: flex-start; padding: 20px 10px; font-family: var(--font-en); margin: 0; min-height: 100vh; overflow-x: hidden;
    transition: padding var(--view-change-speed) ease, background-color var(--view-change-speed) ease;
    direction: ltr;
}

/* --- START: Arabic (RTL) Styles --- */
html[lang="ar"] body { direction: rtl; font-family: var(--font-ar); }
html[lang="ar"] .header { flex-direction: row-reverse; } html[lang="ar"] .header-button i { margin-right: 8px; margin-left: 0; }
html[lang="ar"] .cart-badge { left: -5px; right: auto; } html[lang="ar"] .menu-item { text-align: right; }
html[lang="ar"] .cart-item { flex-direction: row-reverse; }
html[lang="ar"] .item-details { margin-left: 30px; margin-right: 10px; }
html[lang="ar"] .item-info { flex-direction: row-reverse; order: 2; }
html[lang="ar"] .item-info p { text-align: right; }
html[lang="ar"] .item-price-button { margin-right: auto; margin-left: 0; order: 1; }
html[lang="ar"] .payment-button i { margin-left: 8px; margin-right: 0; } html[lang="ar"] .search-section { flex-direction: row-reverse; }
html[lang="ar"] .order-id { text-align: right; }
html[lang="ar"] .order-total { text-align: left; }
html[lang="ar"] .order-preview-content p { text-align: right; }
html[lang="ar"] .order-preview-content ul { padding-left: 0; padding-right: 15px; } html[lang="ar"] .order-status-controls { flex-direction: row-reverse; flex-wrap: wrap-reverse; }
html[lang="ar"] .status-button i { margin-left: 8px; margin-right: 0; }
html[lang="ar"] .add-to-cart-preview-button i { margin-left: 10px !important; margin-right: 0 !important; }
html[lang="ar"] input[type="email"], html[lang="ar"] input[type="password"], html[lang="ar"] input[type="text"] { text-align: right; } html[lang="ar"] input::placeholder { text-align: right; }
html[lang="ar"] .logout-button i, html[lang="ar"] .back-button i, html[lang="ar"] .item-preview-container .header-button i, html[lang="ar"] #screen-8 .header-button i { transform: scaleX(-1); }
html[lang="ar"] #discover-button i { margin-left: 8px; margin-right: 0; }
html[lang="ar"] h2, html[lang="ar"] h4, html[lang="ar"] .screen-title, html[lang="ar"] .preview-name, html[lang="ar"] .preview-description, html[lang="ar"] .empty-cart-message, html[lang="ar"] .no-orders-message, html[lang="ar"] .order-preview-placeholder, html[lang="ar"] .error-message, html[lang="ar"] .sort-options p, html[lang="ar"] .payment-label, html[lang="ar"] .switch-account p, html[lang="ar"] .pick-photo-label, html[lang="ar"] #screen-1 .form-box h3, html[lang="ar"] #screen-2 .form-box h3,
html[lang="ar"] .order-status, html[lang="ar"] .discovery-section h4 { text-align: center !important; }
/* RTL Settings Panel Content */
html[lang="ar"] #settings-panel { font-family: var(--font-ar); /* LTR rules apply now */ }
html[lang="ar"] .settings-label { text-align: right; }
html[lang="ar"] .settings-current-display span:first-child:not(.theme-swatch):not(.toggle-switch) { text-align: right; }
html[lang="ar"] .option-item { text-align: right; flex-direction: row-reverse; }
html[lang="ar"] .option-item span:first-of-type:not(.theme-swatch) { text-align: right; }
html[lang="ar"] .theme-swatch { }
/* RTL Discovery Mode */
html[lang="ar"] .offer-card h5 { text-align: right; }
html[lang="ar"] .offer-card p.offer-description { text-align: right; }
html[lang="ar"] .offer-items span { margin-left: 6px; margin-right: 0; }
html[lang="ar"] .bundle-pricing { flex-direction: row-reverse; }
html[lang="ar"] .add-bundle-button i, html[lang="ar"] .add-suggestion-button i { margin-left: 8px; margin-right: 0; }
html[lang="ar"] .bundle-discount-tag { left: 10px; right: auto; transform: rotate(-5deg); }
html[lang="ar"] .discovery-offers-scroller { direction: rtl; }
html[lang="ar"] .suggestion-grid-item h5 { text-align: center !important; }
html[lang="ar"] .suggestion-total-price strong { margin-left: 5px; margin-right: 0; }
html[lang="ar"] .discovery-category-section h5 { text-align: right; }
html[lang="ar"] .discovery-category-grid { direction: rtl; }
html[lang="ar"] .discovery-category-item p { text-align: right; }
/* RTL Suggestion Item Images */
html[lang="ar"] .suggestion-item-images { flex-direction: row-reverse; }
html[lang="ar"] .suggestion-item-images .plus-separator { margin: 0 5px; } /* Ensure spacing is consistent */

/* RTL: Settings Toggle */
html[lang="ar"] .settings-toggle { margin-left: auto; margin-right: 0; }
html[lang="ar"] .toggle-switch { left: auto; right: 2px; }
html[lang="ar"] .settings-toggle[aria-checked="true"] .toggle-switch { transform: translateX(-18px); }
html[lang="ar"] #discovery-toggle-group .settings-label { text-align: right; }
/* RTL Passcode Modal */
html[lang="ar"] .passcode-modal-buttons { flex-direction: row-reverse; }
/* RTL Product Management */
html[lang="ar"] .category-list-item { flex-direction: row-reverse; }
html[lang="ar"] .category-name { text-align: right; }
html[lang="ar"] .category-actions { order: -1; /* Move actions to the start in flex */ }
html[lang="ar"] .drag-handle { padding: 0 5px; margin-left: 0; margin-right: 5px; /* Adjust handle spacing */ }
html[lang="ar"] .product-grid-item-admin .product-name-admin,
html[lang="ar"] .product-grid-item-admin .product-price-admin { text-align: center; } /* Keep centered */
html[lang="ar"] .product-grid-item-admin .admin-actions-overlay { right: auto; left: 5px; }
html[lang="ar"] #add-product-form-container, html[lang="ar"] .add-category-form { text-align: center; /* Center button */ }
html[lang="ar"] #add-product-form-container .form-box, html[lang="ar"] .add-category-form .form-box { text-align: right; /* Content within form box */ }
html[lang="ar"] .add-product-form label, html[lang="ar"] .add-category-form label { text-align: right; }
html[lang="ar"] .add-product-form select, html[lang="ar"] .add-category-form select {
     background-position: left 10px top 50%;
     padding-left: 30px;
     padding-right: 12px;
}
html[lang="ar"] #category-view-container h4,
html[lang="ar"] #product-view-container h4,
html[lang="ar"] .add-product-form h5,
html[lang="ar"] .add-category-form h5 { text-align: center !important; } /* Ensure centered */
/* Fix for 2-column layout label alignment in RTL */
@media (min-width: 992px) {
    html[lang="ar"] #add-product-form-container label {
        text-align: left; /* Labels on the right side align left */
    }
    html[lang="ar"] #add-category-form label {
        text-align: left; /* Also apply to add category form */
    }
}
/* NEW: RTL for Edit Modals */
html[lang="ar"] #edit-product-modal-box label,
html[lang="ar"] #edit-category-modal-box label {
    text-align: right;
}
html[lang="ar"] #edit-product-modal-box select,
html[lang="ar"] #edit-category-modal-box select { /* Apply to category modal too if needed */
    background-position: left 10px top 50%;
    padding-left: 30px;
    padding-right: 10px;
}


/* --- END: Arabic (RTL) Styles --- */

/* App Container */
.app-container {
    width: 100%; max-width: 340px; min-height: var(--screen-min-height); position: relative; overflow: hidden;
    border-radius: var(--screen-border-radius); border: var(--border-thickness) solid var(--border-color);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2); background-color: var(--main-bg-color);
    margin: 0 auto;
    transition: max-width var(--view-change-speed) ease, min-height var(--view-change-speed) ease, height var(--view-change-speed) ease, width var(--view-change-speed) ease, margin var(--view-change-speed) ease, border-radius var(--view-change-speed) ease, border var(--view-change-speed) ease, box-shadow var(--view-change-speed) ease, opacity var(--lang-change-speed) ease-in-out, background-color var(--view-change-speed) ease;
}
.app-container.language-switching { opacity: 0; pointer-events: none; }

/* Full Screen Mode */
body.full-screen-mode {
    padding: 0;
    background-color: var(--body-outer-bg);
    align-items: stretch; overflow: hidden; height: 100%;
}
body.full-screen-mode .app-container { max-width: none; margin: 0; border: none; border-radius: 0; box-shadow: none; width: 100%; height: 100%; min-height: 100%; }

 /* Base Screen Styling */
.screen {
    width: 100%; height: 100%; padding: 25px 20px; box-sizing: border-box;
    display: flex; flex-direction: column;
    position: absolute; top: 0; left: 0;
    opacity: 0; pointer-events: none;
    transform: translateY(40px);
    overflow-y: auto; z-index: 1;
    background-color: var(--main-bg-color);
    transition: opacity var(--transition-speed) ease-in-out,
                transform calc(var(--transition-speed) * 1.5) cubic-bezier(0.175, 0.885, 0.32, 1.275),
                background-color var(--view-change-speed) ease;
}

/* Active Screen Style */
.screen.active {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
    z-index: 2;
}

/* Screen Content Base Style */
.screen-content {
    display: flex; flex-direction: column; align-items: center;
    width: 100%; flex-grow: 1; max-width: 1100px;
    margin-left: auto; margin-right: auto; padding-bottom: 70px;
}

/* General Styles (Headings, Forms, Buttons, etc.) */
h2 { color: var(--text-color-light); -webkit-text-stroke: 1px var(--text-color-dark); text-stroke: 1px var(--text-color-dark); paint-order: stroke fill; font-size: 2rem; margin-bottom: 25px; text-align: center; font-weight: 700; }
h3:not(.screen-title) { color: var(--text-color-dark); font-size: 1.3rem; margin-bottom: 20px; text-align: center; }
h4 { color: var(--text-color-light); -webkit-text-stroke: 1px var(--text-color-dark); text-stroke: 1px var(--text-color-dark); paint-order: stroke fill; font-size: 1.8rem; margin-top: 10px; margin-bottom: 20px; text-align: center; font-weight: 700; }
#screen-5 h4 { font-size: 1.5rem; margin-bottom: 10px; color: var(--text-color-dark); -webkit-text-stroke: none; text-stroke: none; text-align: center; }
.form-box { width: 100%; margin-bottom: 25px; display: flex; flex-direction: column; align-items: center; max-width: 450px; }
#screen-1 .form-box h3, #screen-2 .form-box h3 { font-size: 1.5rem; text-align: center; }
input[type="email"], input[type="password"], input[type="text"], input[type="number"], select {
    background-color: var(--lighter-blue-bg); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 12px 15px; margin-bottom: 15px; width: 100%; box-sizing: border-box; color: var(--text-color-dark); font-size: 1rem; transition: box-shadow var(--fast-transition-speed) ease, background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; text-align: left; font-family: inherit; /* Ensure select inherits font */ }
input:focus, select:focus { outline: none; box-shadow: 0 0 0 2px var(--active-green); }
input::placeholder { color: #555; text-align: left; }
 body[data-theme="yellow"] input::placeholder, body[data-theme="orange"] input::placeholder { color: #777; }
.error-message { color: red; font-size: 0.9rem; display: none; margin-top: -10px; margin-bottom: 10px; text-align: center; }
.button { border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 10px 25px; cursor: pointer; font-size: 1.1rem; font-weight: 600; text-align: center; background-color: var(--lighter-blue-bg); color: var(--text-color-dark); transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; width: 70%; margin-top: 15px; box-sizing: border-box; user-select: none; max-width: 350px; font-family: inherit; }
.button:hover:not(:active) { background-color: color-mix(in srgb, var(--lighter-blue-bg) 80%, white); }
.button:active { transform: scale(0.96); background-color: color-mix(in srgb, var(--lighter-blue-bg) 60%, white); }
.button.rect-button { border-radius: var(--element-border-radius); width: 100%; } .button.submit-button { width: auto; padding: 10px 35px; margin-top: 25px; font-size: 1.2rem; }
.button.small-button { font-size: 0.9rem; padding: 6px 15px; width: auto; margin-top: 5px; display: inline-flex; align-items: center; justify-content: center; gap: 5px; }
.button.small-button i { font-size: 1em; }
.button.back-button { width: auto; padding: 8px 20px; font-size: 0.9rem; margin-top: 25px; background: transparent; border: none; color: var(--text-color-dark); display: inline-flex; align-items: center; gap: 5px; }
body[data-theme="light-blue"] .button.back-button, body[data-theme="mono-light"] .button.back-button { color: #555; }
body[data-theme="dark-grey"] .button.back-button, body[data-theme="night"] .button.back-button, body[data-theme="mono-dark"] .button.back-button { color: #ccc; }
 body[data-theme="yellow"] .button.back-button, body[data-theme="orange"] .button.back-button { color: var(--text-color-dark); }
.switch-account { margin-top: 40px; text-align: center; width: 80%; max-width: 350px; } .switch-account p { font-size: 0.9rem; color: var(--text-color-dark); margin-bottom: 8px; text-align: center; }
.pick-photo-label { font-size: 1.1rem; color: var(--text-color-dark); margin-top: 20px; margin-bottom: 15px; font-weight: 600; text-align: center; }
.photo-picker { display: flex; justify-content: center; gap: 20px; margin-bottom: 30px; flex-wrap: wrap; }
.profile-pic { width: 70px; height: 70px; border-radius: 50%; border: 3px solid transparent; cursor: pointer; object-fit: cover; transition: border-color var(--transition-speed) ease, transform var(--fast-transition-speed) ease; background-color: #eee; }
.profile-pic:active { transform: scale(0.95); } .profile-pic.active { border-color: var(--border-color); transform: scale(1.05); }

/* Header (General) */
.header { display: flex; align-items: center; justify-content: space-between; width: 100%; margin-bottom: 30px; padding: 0; position: relative; min-height: 60px; gap: 10px; }
.header h3.screen-title { flex-grow: 1; text-align: center; margin: 0; font-size: 1.8rem; color: var(--text-color-light); -webkit-text-stroke: 1px var(--text-color-dark); text-stroke: 1px var(--text-color-dark); paint-order: stroke fill; font-weight: 700; }
.header-button { margin-top: 0; flex-shrink: 0; background: var(--lighter-blue-bg); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 8px 12px; cursor: pointer; font-size: 0.9rem; font-weight: 600; color: var(--text-color-dark); display: flex; align-items: center; gap: 8px; white-space: nowrap; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; user-select: none; font-family: inherit; }
.header-button:active { transform: scale(0.96); background-color: color-mix(in srgb, var(--lighter-blue-bg) 60%, white); }
.header-button i { font-size: 1.1em; margin-left: 8px; }


/* Cart & User Icons */
.cart-icon-container, .user-icon-container { margin-top: 0; flex-shrink: 0; position: relative; display: flex; flex-direction: column; align-items: center; gap: 3px; min-width: 50px; cursor: pointer; user-select: none; transition: transform var(--fast-transition-speed) ease; }
.cart-icon-container:active, .user-icon-container:active { transform: scale(0.95); }
.cart-icon, .user-icon { width: 45px; height: 45px; border-radius: 50%; border: var(--border-thickness) solid var(--border-color); background-color: var(--lighter-blue-bg); display: flex; justify-content: center; align-items: center; font-size: 1.6rem; color: var(--text-color-dark); transition: background-color var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; overflow: hidden; }
.user-icon img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; display: none; } .user-icon i.fa-user { display: block; }
.cart-icon-container:hover .cart-icon, .user-icon-container:hover .user-icon { background-color: color-mix(in srgb, var(--lighter-blue-bg) 80%, white); }
.cart-icon-container span, .user-icon-container span { font-size: 0.8rem; font-weight: 600; color: var(--text-color-dark); transition: color var(--view-change-speed) ease;}
.cart-badge { position: absolute; top: -5px; right: -5px; background-color: var(--active-green); color: var(--text-color-light); border-radius: 50%; width: 22px; height: 22px; font-size: 0.8rem; font-weight: 700; display: none; justify-content: center; align-items: center; border: 1px solid var(--border-color); transform-origin: center; animation: pulseBadge 1.5s infinite ease-in-out; transition: background-color var(--view-change-speed) ease, color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, opacity 0.2s ease; }
body[data-theme="green"] .cart-badge, body[data-theme="yellow"] .cart-badge, body[data-theme="orange"] .cart-badge { color: var(--text-color-dark); }
 body[data-theme="blue"] #cart-badge, body[data-theme="blue"] #cart-badge-preview, body[data-theme="blue"] #cart-badge-discovery { color: #000; }
.cart-badge.visible { display: flex; } @keyframes pulseBadge { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

/* Menu Styles */
.sort-options {
    display: flex; flex-direction: column; align-items: center; width: 100%;
    margin-bottom: 25px; /* Restore original bottom margin */
}
.sort-options p { margin: 0 0 10px 0; font-size: 1.2rem; font-weight: 600; color: var(--text-color-dark); text-align: center; transition: color var(--view-change-speed) ease;}
.sort-buttons { display: flex; gap: 10px; border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 5px; background-color: rgba(255, 255, 255, 0.2); flex-wrap: wrap; justify-content: center; transition: border-color var(--view-change-speed) ease;}
.sort-button { background: none; border: none; border-radius: var(--pill-border-radius); padding: 6px 18px; cursor: pointer; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease, transform var(--fast-transition-speed) ease; user-select: none; margin: 2px; font-family: inherit; }
.sort-button.active { background-color: var(--active-green); color: var(--text-color-dark); } .sort-button:active { transform: scale(0.96); }
body[data-theme="green"] .sort-button.active, body[data-theme="yellow"] .sort-button.active, body[data-theme="orange"] .sort-button.active { color: var(--text-color-dark); }

#discover-button {
     margin-top: -5px; /* Adjust spacing between sort and discover */
     margin-bottom: 20px; /* Space below discover button */
     background-color: #ffeb3b;
     border-color: #fbc02d;
     color: #000;
     display: none; /* Initially hidden */
     width: auto; /* Let content determine width */
}
#discover-button:hover:not(:active) { background-color: #fff06b; }

.menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 100%; padding-bottom: 10px; }
@keyframes fadeInItem { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.menu-item { background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 10px; text-align: center; flex-direction: column; align-items: center; justify-content: space-between; box-sizing: border-box; cursor: pointer; transition: transform var(--fast-transition-speed) ease, box-shadow var(--fast-transition-speed) ease, background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; opacity: 1; animation: fadeInItem 0.5s ease-out backwards; display: flex; }
.menu-item.hidden { display: none; } .menu-item:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); } .menu-item:active { transform: scale(0.98) translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.menu-item img { width: 100%; aspect-ratio: 4 / 3; object-fit: cover; border-radius: 5px; margin-bottom: 10px; border: 1px solid rgba(0,0,0,0.1); background-color: #eee; pointer-events: none; }
.menu-item p { margin: 0 0 10px 0; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); pointer-events: none; text-align: center; transition: color var(--view-change-speed) ease;}
.menu-item .price-button { background-color: var(--button-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 5px 15px; font-size: 0.9rem; font-weight: 700; color: var(--text-color-dark); display: inline-block; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; pointer-events: auto; user-select: none; z-index: 5; position: relative; font-family: inherit; }
.menu-item .price-button:active { transform: scale(0.95); background-color: color-mix(in srgb, var(--button-bg-color) 60%, white); }

/* Cart Styles */
.cart-items { width: 100%; margin-bottom: 25px; display: flex; flex-direction: column; gap: 15px; min-height: 100px; max-width: 600px; margin-left: auto; margin-right: auto; }
.cart-item { display: flex; align-items: center; background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 10px; gap: 10px; animation: fadeInItem 0.5s ease-out backwards; position: relative; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease;}
.cart-item.discount-item { background-color: color-mix(in srgb, var(--active-green) 10%, var(--main-bg-color)); }
.cart-item img { width: 65px; height: 65px; border-radius: 5px; object-fit: cover; border: 1px solid rgba(0,0,0,0.1); background-color: #eee; flex-shrink: 0; }
.item-details { flex-grow: 1; display: flex; align-items: center; gap: 10px; flex-wrap: nowrap; margin-right: 30px; overflow: hidden; }
.item-info { display: flex; flex-direction: row; align-items: baseline; gap: 8px; flex-grow: 1; flex-shrink: 1; overflow: hidden; min-width: 0; order: 1; }
.item-info p { margin: 0; font-size: 1rem; font-weight: 700; color: var(--text-color-dark); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; flex-shrink: 1; min-width: 0; text-align: left; transition: color var(--view-change-speed) ease;}
span.item-quantity { font-size: 0.9rem; font-weight: 600; color: var(--text-color-dark); margin: 0; white-space: nowrap; flex-shrink: 0; transition: color var(--view-change-speed) ease;}
.item-price-button { background-color: var(--button-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 6px 12px; font-size: 0.9rem; font-weight: 700; color: var(--text-color-dark); white-space: nowrap; margin-left: auto; flex-shrink: 0; font-family: inherit; order: 2; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease;}
.remove-item-button { position: absolute; top: 5px; right: 5px; background: var(--remove-red); color: white; border: 1px solid var(--border-color); border-radius: 50%; width: 20px; height: 20px; font-size: 0.8rem; line-height: 18px; text-align: center; cursor: pointer; font-weight: bold; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] .remove-item-button, body[data-theme="orange"] .remove-item-button { color: var(--text-color-dark); }
.remove-item-button:hover { background-color: color-mix(in srgb, var(--remove-red) 80%, black); } .remove-item-button:active { transform: scale(0.9); }
.cart-total { padding-top: 15px; width: 100%; margin-top: auto; display: flex; flex-direction: column; align-items: center; gap: 8px; max-width: 600px; margin-left: auto; margin-right: auto; }
.cart-total h4 { font-size: 1.5rem; margin-bottom: 5px; color: var(--text-color-dark); text-stroke: none; -webkit-text-stroke: none; text-align: center; transition: color var(--view-change-speed) ease;}
.total-calculation { text-align: center; width: 100%; font-size: 0.9rem; color: var(--text-color-dark); line-height: 1.4; max-height: 80px; overflow-y: auto; padding: 0 5px; transition: color var(--view-change-speed) ease;}
.total-calculation p { margin: 2px 0; font-weight: 600;}
span.final-equals { font-size: 1.3rem; font-weight: 700; color: var(--text-color-dark); margin-top: 5px; transition: color var(--view-change-speed) ease;}
.total-amount-button { background-color: var(--button-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 8px 25px; font-size: 1.2rem; font-weight: 700; color: var(--text-color-dark); display: inline-block; cursor: pointer; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; user-select: none; font-family: inherit; }
.total-amount-button:active { transform: scale(0.96); background-color: color-mix(in srgb, var(--button-bg-color) 60%, white); }
.empty-cart-message, .no-orders-message { color: var(--text-color-dark); font-weight: 600; margin: 20px 0; text-align: center; transition: color var(--view-change-speed) ease;}
.payment-method-section { display: flex; flex-direction: column; align-items: center; width: 100%; margin-top: 15px; margin-bottom: 10px; }
.payment-label { margin: 0 0 8px 0; font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); text-align: center; transition: color var(--view-change-speed) ease;}
.payment-methods { display: flex; gap: 10px; border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 5px; background-color: rgba(255, 255, 255, 0.2); flex-wrap: wrap; justify-content: center; transition: border-color var(--view-change-speed) ease;}
.payment-button { display: flex; align-items: center; gap: 8px; padding: 6px 15px; margin: 2px; font-family: inherit; }
body[data-theme="green"] .payment-button.active, body[data-theme="yellow"] .payment-button.active, body[data-theme="orange"] .payment-button.active { color: var(--text-color-dark); }
.payment-button i { font-size: 1.1em; margin-right: 8px; }

/* Management Screen (Order Management - Screen 5) */
.management-container { display: flex; flex-direction: column; width: 100%; flex-grow: 1; gap: 20px; }
.search-section { display: flex; gap: 10px; width: 100%; margin-bottom: 0; flex-wrap: wrap; }
.search-section input { flex-grow: 1; margin-bottom: 0; min-width: 150px; }
.search-section .button { width: auto; margin-top: 0; padding: 10px 15px; font-size: 1rem; border-radius: var(--element-border-radius); flex-shrink: 0; }
.order-management-layout { display: flex; flex-direction: column; flex-grow: 1; gap: 15px; width: 100%; }
.order-log-section { display: flex; flex-direction: column; width: 100%; }
.order-log-container { max-height: 200px; overflow-y: auto; border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 10px; background-color: rgba(255, 255, 255, 0.1); display: flex; flex-direction: column; gap: 8px; transition: border-color var(--view-change-speed) ease;}
.order-log-item { display: flex; justify-content: space-between; align-items: center; background-color: var(--lighter-blue-bg); border: var(--border-thickness) solid var(--border-color); border-radius: 5px; padding: 8px 12px; cursor: pointer; transition: background-color var(--fast-transition-speed), border-color var(--view-change-speed), color var(--view-change-speed); gap: 5px; }
.order-log-item:hover { background-color: color-mix(in srgb, var(--lighter-blue-bg) 80%, white); }
.order-log-item.active { background-color: var(--active-green); }
 body[data-theme="green"] .order-log-item.active, body[data-theme="yellow"] .order-log-item.active, body[data-theme="orange"] .order-log-item.active { color: var(--text-color-dark); }
 body[data-theme="green"] .order-log-item.active span, body[data-theme="yellow"] .order-log-item.active span, body[data-theme="orange"] .order-log-item.active span { color: inherit; }
.order-log-item span { font-size: 0.9rem; font-weight: 600; white-space: nowrap; transition: color var(--view-change-speed) ease;}
.order-id { flex-basis: 40%; overflow: hidden; text-overflow: ellipsis; flex-shrink: 1; text-align: left; color: var(--text-color-dark); }
.order-total { flex-basis: 30%; text-align: right; flex-shrink: 0; color: var(--text-color-dark); }

/* Order Status Styling */
.order-status { flex-basis: 30%; text-align: center; text-transform: capitalize; padding: 3px 8px; border-radius: 4px; font-weight: 700; flex-shrink: 0; transition: background-color 0.2s ease, color 0.2s ease; border: 1px solid rgba(0,0,0,0.2); }
.order-status.pending { background-color: var(--status-pending-bg); color: var(--status-pending-text); }
.order-status.preparing { background-color: var(--status-preparing-bg); color: var(--status-preparing-text); }
.order-status.delivered { background-color: var(--status-delivered-bg); color: var(--status-delivered-text); }

.order-preview-section { display: flex; flex-direction: column; width: 100%; border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 15px; background-color: rgba(255, 255, 255, 0.1); min-height: 150px; transition: border-color var(--view-change-speed) ease;}
.order-preview-content { font-size: 0.9rem; color: var(--text-color-dark); flex-grow: 1; text-align: left; transition: color var(--view-change-speed) ease;}
.order-preview-content p { margin: 3px 0; font-weight: 600; } .order-preview-content p strong { margin-right: 5px; } html[lang="ar"] .order-preview-content p strong { margin-left: 5px; margin-right: 0; } .order-preview-content p span { font-weight: normal; }
.order-preview-content ul { list-style: none; padding-left: 15px; margin: 5px 0; } .order-preview-content li { margin-bottom: 2px; font-size: 0.95em;}
.order-preview-placeholder { text-align: center; color: #555; margin-top: 20px; transition: color var(--view-change-speed) ease;}
 body[data-theme="yellow"] .order-preview-placeholder, body[data-theme="orange"] .order-preview-placeholder { color: #888; }
.order-status-controls { display: flex; gap: 10px; margin-top: 15px; justify-content: center; flex-wrap: wrap; }
.status-button { font-family: inherit; } .status-button i { margin-right: 5px; } .status-button.active { background-color: var(--active-green); } .status-button:disabled { background-color: #ccc; cursor: not-allowed; border-color: #999; color: #666; }
 body[data-theme="green"] .status-button.active, body[data-theme="yellow"] .status-button.active, body[data-theme="orange"] .status-button.active { color: var(--text-color-dark); }


/* Item Preview Screen */
.item-preview-container { align-items: center; padding-top: 10px; }
.preview-image { width: 80%; max-width: 220px; height: auto; aspect-ratio: 4 / 3; object-fit: cover; border-radius: var(--element-border-radius); border: var(--border-thickness) solid var(--border-color); margin-bottom: 20px; background-color: #eee; box-shadow: 0 3px 8px rgba(0,0,0,0.15); transition: border-color var(--view-change-speed) ease;}
.preview-name { font-size: 1.7rem; color: var(--text-color-dark); font-weight: 700; margin-bottom: 10px; text-align: center; transition: color var(--view-change-speed) ease;}
.preview-description { font-size: 0.95rem; color: var(--text-color-dark); text-align: center; margin-bottom: 20px; margin-top: 0; padding: 0 10px; width: 95%; line-height: 1.4; max-width: 500px; transition: color var(--view-change-speed) ease;}
.preview-price { font-size: 1.3rem; font-weight: 700; color: var(--text-color-dark); margin-bottom: 30px; background-color: var(--button-bg-color); padding: 6px 20px; border-radius: var(--pill-border-radius); border: var(--border-thickness) solid var(--border-color); display: inline-block; font-family: inherit; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease;}
.add-to-cart-preview-button { width: 80%; max-width: 240px; margin-top: auto; margin-bottom: 15px; padding: 12px 20px; font-size: 1.2rem; display: flex; justify-content: center; align-items: center; gap: 10px; background-color: var(--active-green); border-color: var(--border-color); color: var(--text-color-dark); font-family: inherit; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease;}
body[data-theme="green"] .add-to-cart-preview-button, body[data-theme="yellow"] .add-to-cart-preview-button, body[data-theme="orange"] .add-to-cart-preview-button { color: var(--text-color-dark); }
 body[data-theme="yellow"] .add-to-cart-preview-button.added { background-color: var(--pending-orange-yellow); color: var(--text-color-dark-yellow); }
 body[data-theme="yellow"] .add-to-cart-preview-button.added:hover:not(:active) { background-color: color-mix(in srgb, var(--pending-orange-yellow) 80%, white); }
 body[data-theme="orange"] .add-to-cart-preview-button.added { background-color: var(--pending-orange-orange); color: var(--text-color-dark-orange); }
 body[data-theme="orange"] .add-to-cart-preview-button.added:hover:not(:active) { background-color: color-mix(in srgb, var(--pending-orange-orange) 80%, white); }
.add-to-cart-preview-button i { margin-right: 10px !important; margin-left: 0 !important; }
.add-to-cart-preview-button:hover:not(:active) { background-color: color-mix(in srgb, var(--active-green) 80%, white); }
.add-to-cart-preview-button:active { transform: scale(0.96); background-color: color-mix(in srgb, var(--active-green) 60%, white); }
.add-to-cart-preview-button.added { background-color: var(--pending-orange); cursor: pointer; color: var(--text-color-dark); }
.add-to-cart-preview-button.added:hover:not(:active) { background-color: color-mix(in srgb, var(--pending-orange) 80%, white); }


/* --- Floating Settings Panel Styles --- */
#settings-panel { position: fixed; bottom: 65px; right: 15px; width: 280px; background-color: #4a4a4a; color: #e0e0e0; border-radius: 12px; padding: 15px 20px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4); z-index: 1100; font-family: var(--font-en); border: 1px solid #666; visibility: hidden; opacity: 0; transform: translateY(15px) scale(0.95); transform-origin: bottom right; transition: visibility 0.25s ease-out, opacity 0.25s ease-out, transform 0.25s ease-out; }
html[lang="ar"] #settings-panel { font-family: var(--font-ar); /* LTR rules apply now */ }
#settings-panel.visible { visibility: visible; opacity: 1; transform: translateY(0) scale(1); }
.settings-group { margin-bottom: 15px; position: relative; }
#discovery-toggle-group { display: flex; align-items: center; justify-content: space-between; } /* Apply flex only to toggle group */
.settings-group:last-child { margin-bottom: 5px; }
.settings-label { display: block; font-size: 0.9rem; font-weight: 600; color: #bbb; margin-bottom: 8px; text-align: left; flex-grow: 1; /* Allow label to grow in flex */ padding-right: 10px; /* Space before toggle */ }
#discovery-toggle-group .settings-label { margin-bottom: 0; } /* Remove bottom margin for toggle label */
html[lang="ar"] .settings-label { text-align: right; }
html[lang="ar"] #discovery-toggle-group .settings-label { padding-left: 10px; padding-right: 0; }
.settings-current-display { display: flex; align-items: center; gap: 10px; background-color: #5f5f5f; padding: 10px 12px; border-radius: 8px; cursor: pointer; border: 1px solid #777; transition: background-color 0.2s ease; outline: none; width: 100%; }
.settings-current-display:hover, .settings-current-display:focus { background-color: #6a6a6a; }
.settings-current-display span:first-child:not(.theme-swatch):not(.toggle-switch) { flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; }
html[lang="ar"] .settings-current-display span:first-child:not(.theme-swatch):not(.toggle-switch) { text-align: right; }
.settings-current-display .fa-chevron-down { transition: transform 0.3s ease; font-size: 0.9em; color: #ccc; flex-shrink: 0; } .settings-group.open .settings-current-display .fa-chevron-down { transform: rotate(180deg); }
.settings-options-list { position: absolute; background-color: #3a3a3a; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3); z-index: 1101; padding: 5px 0; width: 100%; left: 0; top: calc(100% + 5px); border: 1px solid #555; max-height: 0; overflow: hidden; opacity: 0; visibility: hidden; transition: max-height 0.25s ease-out, opacity 0.25s ease-out; }
.settings-group.open-upward .settings-options-list { top: auto; bottom: calc(100% + 5px); }
.settings-group.open .settings-options-list { max-height: 200px; opacity: 1; visibility: visible; overflow-y: auto; transition: max-height 0.25s ease-out, opacity 0.25s ease-out; z-index: 1102; }
.option-item { display: flex; align-items: center; gap: 8px; padding: 10px 15px; cursor: pointer; color: #e0e0e0; transition: background-color 0.15s ease; text-align: left; } html[lang="ar"] .option-item { text-align: right; flex-direction: row-reverse; }
.option-item:hover { background-color: #555; }
.option-item span:first-of-type:not(.theme-swatch) { flex-grow: 1; text-align: left; } html[lang="ar"] .option-item span:first-of-type:not(.theme-swatch) { text-align: right; }
.option-item .fa-check { display: none; color: #00bcd4; font-size: 0.9em; flex-shrink: 0; }
.option-item.active .fa-check { display: inline-block; } .option-item.active { font-weight: 700; color: #fff; }
.theme-swatch { display: inline-block; width: 18px; height: 18px; border-radius: 50%; border: 1px solid #888; flex-shrink: 0; vertical-align: middle; background-color: #ccc; }
.swatch-blue { background-color: var(--main-bg-color-blue); } .swatch-green { background-color: var(--main-bg-color-green); } .swatch-purple { background-color: var(--main-bg-color-purple); } .swatch-dark-grey { background-color: var(--main-bg-color-dark-grey); } .swatch-night { background-color: var(--main-bg-color-night); }
.swatch-light-blue { background: linear-gradient(to right, var(--swatch-light-blue-1) 0%, var(--swatch-light-blue-1) 50%, var(--swatch-light-blue-2) 50%, var(--swatch-light-blue-2) 100%); background-color: transparent; }
.swatch-mono-light { background: linear-gradient(to right, var(--swatch-mono-light-1) 0%, var(--swatch-mono-light-1) 50%, var(--swatch-mono-light-2) 50%, var(--swatch-mono-light-2) 100%); background-color: transparent; }
.swatch-mono-dark { background: linear-gradient(to right, var(--swatch-mono-dark-1) 0%, var(--swatch-mono-dark-1) 50%, var(--swatch-mono-dark-2) 50%, var(--swatch-mono-dark-2) 100%); background-color: transparent; }
.swatch-yellow { background: linear-gradient(to right, var(--swatch-yellow-1) 0%, var(--swatch-yellow-1) 50%, var(--swatch-yellow-2) 50%, var(--swatch-yellow-2) 100%); background-color: transparent; }
.swatch-orange { background: linear-gradient(to right, var(--swatch-orange-1) 0%, var(--swatch-orange-1) 50%, var(--swatch-orange-2) 50%, var(--swatch-orange-2) 100%); background-color: transparent; }

.settings-toggle {
    position: relative;
    display: inline-block;
    width: 40px; height: 22px;
    background-color: #777; /* Background when off */
    border-radius: 11px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    flex-shrink: 0; /* Prevent shrinking */
}
.toggle-switch {
    position: absolute;
    top: 2px; left: 2px;
    width: 18px; height: 18px;
    background-color: white;
    border-radius: 50%;
    transition: transform 0.3s ease;
}
.settings-toggle[aria-checked="true"] { background-color: #4CAF50; }
.settings-toggle[aria-checked="true"] .toggle-switch { transform: translateX(18px); }

/* --- End Floating Settings Panel Styles --- */

/* Order Preview Dark/Light Theme Text Color Fix */
body[data-theme="dark-grey"] #order-preview-content, body[data-theme="night"] #order-preview-content, body[data-theme="mono-dark"] #order-preview-content { color: var(--text-color-dark); }
body[data-theme="dark-grey"] #order-preview-content p, body[data-theme="dark-grey"] #order-preview-content li, body[data-theme="dark-grey"] #order-preview-content span, body[data-theme="dark-grey"] #order-preview-content strong, body[data-theme="night"] #order-preview-content p, body[data-theme="night"] #order-preview-content li, body[data-theme="night"] #order-preview-content span, body[data-theme="night"] #order-preview-content strong, body[data-theme="mono-dark"] #order-preview-content p, body[data-theme="mono-dark"] #order-preview-content li, body[data-theme="mono-dark"] #order-preview-content span, body[data-theme="mono-dark"] #order-preview-content strong { color: inherit; }
body[data-theme="dark-grey"] .order-preview-placeholder, body[data-theme="night"] .order-preview-placeholder, body[data-theme="mono-dark"] .order-preview-placeholder { color: #90A4AE; }

/* --- Custom Alert Modal Styles --- */
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 100; visibility: hidden; opacity: 0; display: flex; justify-content: center; align-items: center; padding: 20px; transition: opacity var(--transition-speed) ease, visibility var(--transition-speed) ease; font-family: var(--font-en); }
html[lang="ar"] .modal-overlay { font-family: var(--font-ar); } .modal-overlay.visible { visibility: visible; opacity: 1; }
.modal-box { background-color: #E0F7FA; padding: 25px 30px; border-radius: var(--element-border-radius); border: var(--border-thickness) solid #0077B6; box-shadow: 0 5px 15px rgba(0,0,0,0.3); max-width: 90%; width: 320px; text-align: center; color: #111; transform: scale(0.9); opacity: 0; transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease; will-change: transform, opacity; }
.modal-overlay.visible .modal-box { transform: scale(1); opacity: 1; }
.modal-box h3 { font-size: 1.4rem; margin-top: 0; margin-bottom: 15px; color: #000; font-weight: 700; -webkit-text-stroke: 0; text-stroke: 0; }
.modal-box p { margin-bottom: 25px; line-height: 1.6; font-size: 1rem; font-weight: 600; white-space: pre-line; color: #333; }
html[lang="ar"] .modal-box h3, html[lang="ar"] .modal-box p { text-align: right !important; } html[lang="en"] .modal-box h3, html[lang="en"] .modal-box p { text-align: left !important; }
.modal-box .button { width: auto; padding: 8px 35px; margin-top: 10px; font-size: 1.1rem; background-color: var(--button-bg-color); border: var(--border-thickness) solid var(--border-color); color: var(--text-color-dark); border-radius: var(--pill-border-radius); transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--fast-transition-speed) ease, color var(--fast-transition-speed) ease; }
.modal-box .button:hover { background-color: color-mix(in srgb, var(--button-bg-color) 80%, white); border-color: color-mix(in srgb, var(--border-color) 80%, white); }
.modal-box .button:active { transform: scale(0.96); background-color: color-mix(in srgb, var(--button-bg-color) 60%, white); }
body[data-theme="dark-grey"] #custom-alert-box, body[data-theme="night"] #custom-alert-box, body[data-theme="mono-dark"] #custom-alert-box { background-color: #424242; color: #eee; border-color: #616161; }
body[data-theme="dark-grey"] #custom-alert-box h3, body[data-theme="night"] #custom-alert-box h3, body[data-theme="mono-dark"] #custom-alert-box h3 { color: #fff; -webkit-text-stroke: 0; text-stroke: 0; }
body[data-theme="dark-grey"] #custom-alert-box p, body[data-theme="night"] #custom-alert-box p, body[data-theme="mono-dark"] #custom-alert-box p { color: #ddd; }
/* --- End Custom Alert Modal Styles --- */

/* --- Passcode Modal Styles (Settings Theme) --- */
#passcode-modal-overlay { z-index: 1200; font-family: var(--font-en); }
html[lang="ar"] #passcode-modal-overlay { font-family: var(--font-ar); }
#passcode-modal-box { background-color: #4a4a4a; border: 1px solid #666; color: #e0e0e0; width: 290px; padding: 20px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4); max-width: 90%; text-align: center; transform: scale(0.9); opacity: 0; transition: transform var(--transition-speed) ease, opacity var(--transition-speed) ease; will-change: transform, opacity; }
.modal-overlay.visible #passcode-modal-box { transform: scale(1); opacity: 1; }
#passcode-modal-box h3 { color: #e0e0e0; font-size: 1.2rem; margin-top: 0; margin-bottom: 15px; text-align: center !important; font-weight: 600; -webkit-text-stroke: 0; text-stroke: 0; }
#passcode-modal-box input[type="password"] { width: 100%; padding: 10px 15px; margin-bottom: 20px; text-align: center; font-size: 1.1rem; background-color: #5f5f5f; color: #e0e0e0; border: 1px solid #777; border-radius: 8px; box-sizing: border-box; }
#passcode-modal-box input[type="password"]:focus { outline: none; box-shadow: 0 0 0 2px #00bcd4; }
#passcode-modal-box input::placeholder { color: #aaa; text-align: center; } html[lang="ar"] #passcode-modal-box input::placeholder { text-align: center; }
#passcode-modal-box .error-message { font-size: 0.85rem; margin-top: -15px; margin-bottom: 15px; color: #EF9A9A; display: none; text-align: center !important; }
.passcode-modal-buttons { display: flex; justify-content: space-between; align-items: center; gap: 15px; margin-top: 15px; }
#passcode-modal-box .button { margin-top: 0; padding: 10px 15px; font-size: 1rem; font-weight: 700; background-color: #5f5f5f; border: 1px solid #777; color: #e0e0e0; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease; cursor: pointer; user-select: none; font-family: inherit; }
#passcode-modal-box .button:hover:not(:active) { background-color: #6a6a6a; }
#passcode-modal-box .button:active { transform: scale(0.96); background-color: #555; }
#passcode-modal-box .button.cancel-button { flex-grow: 1; border-radius: 8px; text-align: center; }
#passcode-modal-box .button.ok-button { width: 55px; height: 55px; border-radius: 50%; padding: 0; flex-shrink: 0; line-height: calc(55px - 2 * 1px); font-size: 1.1rem; }
/* --- End Passcode Modal Styles --- */

/* --- START: Custom Confirmation Modal Styles --- */
#custom-confirm-modal-overlay { z-index: 1250; /* Ensure it's above other modals if needed */ }
#custom-confirm-modal-box { /* Reuse general modal styling */ background-color: #FFF3E0; /* Light orange/warning background */ border-color: #FFB74D; /* Orange border */ color: #333; width: 340px; }
body[data-theme="dark-grey"] #custom-confirm-modal-box, body[data-theme="night"] #custom-confirm-modal-box, body[data-theme="mono-dark"] #custom-confirm-modal-box { background-color: #554333; /* Darker warning background */ border-color: #FFCC80; color: #eee; }
#custom-confirm-modal-box h3 { /* Reuse general modal h3 style */ color: #E65100; /* Dark orange title */ -webkit-text-stroke: 0; text-stroke: 0; }
body[data-theme="dark-grey"] #custom-confirm-modal-box h3, body[data-theme="night"] #custom-confirm-modal-box h3, body[data-theme="mono-dark"] #custom-confirm-modal-box h3 { color: #FFCC80; /* Light orange title */ }
#custom-confirm-modal-box p { /* Reuse general modal p style */ color: #555; /* Slightly darker text for readability */ font-weight: 600; }
body[data-theme="dark-grey"] #custom-confirm-modal-box p, body[data-theme="night"] #custom-confirm-modal-box p, body[data-theme="mono-dark"] #custom-confirm-modal-box p { color: #ddd; }
#custom-confirm-modal-box .passcode-modal-buttons { /* Reuse button container style */ }
#custom-confirm-modal-box .button { /* Reuse general button style from passcode modal */ font-family: inherit; font-weight: 700; padding: 10px 20px; }
#custom-confirm-modal-box .cancel-button { background-color: #BDBDBD; border-color: #9E9E9E; color: #333; flex-grow: 1; border-radius: 8px; }
#custom-confirm-modal-box .cancel-button:hover:not(:active) { background-color: #ccc; }
#custom-confirm-modal-box .confirm-button { background-color: var(--remove-red); /* Red for confirm/delete */ border-color: color-mix(in srgb, var(--remove-red) 80%, black); color: white; flex-grow: 1; border-radius: 8px; }
#custom-confirm-modal-box .confirm-button:hover:not(:active) { background-color: color-mix(in srgb, var(--remove-red) 80%, white); }
/* Dark theme adjustments for confirm modal buttons */
body[data-theme="dark-grey"] #custom-confirm-modal-box .cancel-button, body[data-theme="night"] #custom-confirm-modal-box .cancel-button, body[data-theme="mono-dark"] #custom-confirm-modal-box .cancel-button { background-color: #616161; border-color: #757575; color: #eee; }
body[data-theme="dark-grey"] #custom-confirm-modal-box .cancel-button:hover:not(:active), body[data-theme="night"] #custom-confirm-modal-box .cancel-button:hover:not(:active), body[data-theme="mono-dark"] #custom-confirm-modal-box .cancel-button:hover:not(:active) { background-color: #757575; }
body[data-theme="dark-grey"] #custom-confirm-modal-box .confirm-button, body[data-theme="night"] #custom-confirm-modal-box .confirm-button, body[data-theme="mono-dark"] #custom-confirm-modal-box .confirm-button { background-color: var(--remove-red); border-color: color-mix(in srgb, var(--remove-red) 70%, black); color: white; /* Keep white text on red */ }
body[data-theme="dark-grey"] #custom-confirm-modal-box .confirm-button:hover:not(:active), body[data-theme="night"] #custom-confirm-modal-box .confirm-button:hover:not(:active), body[data-theme="mono-dark"] #custom-confirm-modal-box .confirm-button:hover:not(:active) { background-color: color-mix(in srgb, var(--remove-red) 80%, white); }
/* --- END: Custom Confirmation Modal Styles --- */


/* --- START: Edit Product Modal Styles (REVISED FOR SCROLLING) --- */
#edit-product-modal-overlay { z-index: 1150; align-items: center; }
#edit-product-modal-box { width: 380px; max-width: 95%; max-height: 85vh; display: flex; flex-direction: column; padding: 0; overflow: hidden; background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.3); color: var(--text-color-dark); transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; }
#edit-product-modal-box h3 { padding: 20px 25px 15px 25px; margin: 0; flex-shrink: 0; border-bottom: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); text-align: center !important; font-size: 1.4rem; color: var(--text-color-dark); font-weight: 700; -webkit-text-stroke: 0; text-stroke: 0; transition: color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] #edit-product-modal-box h3, body[data-theme="night"] #edit-product-modal-box h3, body[data-theme="mono-dark"] #edit-product-modal-box h3 { color: var(--text-color-light); border-bottom-color: color-mix(in srgb, var(--border-color) 50%, transparent); }
#edit-product-modal-box .form-box { max-width: none; width: 100%; overflow-y: auto; flex-grow: 1; padding: 20px 25px 10px 25px; margin-bottom: 0; scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--border-color) 50%, transparent) color-mix(in srgb, var(--main-bg-color) 50%, transparent); }
#edit-product-modal-box .form-box::-webkit-scrollbar { width: 8px; } #edit-product-modal-box .form-box::-webkit-scrollbar-track { background: color-mix(in srgb, var(--main-bg-color) 50%, transparent); border-radius: 4px; } #edit-product-modal-box .form-box::-webkit-scrollbar-thumb { background-color: color-mix(in srgb, var(--border-color) 70%, transparent); border-radius: 4px; border: 2px solid color-mix(in srgb, var(--main-bg-color) 50%, transparent); }
body[data-theme="dark-grey"] #edit-product-modal-box .form-box, body[data-theme="night"] #edit-product-modal-box .form-box, body[data-theme="mono-dark"] #edit-product-modal-box .form-box { scrollbar-color: #777 #444; } body[data-theme="dark-grey"] #edit-product-modal-box .form-box::-webkit-scrollbar-track, body[data-theme="night"] #edit-product-modal-box .form-box::-webkit-scrollbar-track, body[data-theme="mono-dark"] #edit-product-modal-box .form-box::-webkit-scrollbar-track { background: #444; } body[data-theme="dark-grey"] #edit-product-modal-box .form-box::-webkit-scrollbar-thumb, body[data-theme="night"] #edit-product-modal-box .form-box::-webkit-scrollbar-thumb, body[data-theme="mono-dark"] #edit-product-modal-box .form-box::-webkit-scrollbar-thumb { background-color: #777; border-color: #444; }
#edit-product-modal-box label { display: block; margin-bottom: 3px; font-size: 0.9rem; font-weight: 600; text-align: left; color: var(--text-color-dark); transition: color var(--view-change-speed) ease; }
#edit-product-modal-box input, #edit-product-modal-box select { width: 100%; margin-bottom: 12px; padding: 8px 10px; font-size: 0.95rem; background-color: var(--lighter-blue-bg); border: 1px solid var(--border-color); color: var(--text-color-dark); border-radius: 5px; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease, box-shadow var(--fast-transition-speed) ease; }
#edit-product-modal-box select { appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23555%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 10px top 50%; background-size: .6em auto; padding-right: 30px; }
body[data-theme="dark-grey"] #edit-product-modal-box select, body[data-theme="night"] #edit-product-modal-box select, body[data-theme="mono-dark"] #edit-product-modal-box select { background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23cccccc%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); }
#edit-product-modal-box input:focus, #edit-product-modal-box select:focus { outline: none; box-shadow: 0 0 0 2px var(--active-green); border-color: var(--active-green); }
html[lang="ar"] #edit-product-modal-box label { text-align: right; } html[lang="ar"] #edit-product-modal-box select { background-position: left 10px top 50%; padding-left: 30px; padding-right: 10px; }
#edit-product-error { order: 2; padding: 0 25px 10px 25px; margin: 0; font-size: 0.85rem; flex-shrink: 0; color: red; display: none; text-align: center !important; }
#edit-product-modal-box .passcode-modal-buttons { order: 3; padding: 15px 25px 20px 25px; flex-shrink: 0; border-top: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); margin-top: 0; background-color: inherit; transition: border-color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] #edit-product-modal-box label, body[data-theme="night"] #edit-product-modal-box label, body[data-theme="mono-dark"] #edit-product-modal-box label { color: #ccc; } body[data-theme="dark-grey"] #edit-product-modal-box input, body[data-theme="night"] #edit-product-modal-box input, body[data-theme="mono-dark"] #edit-product-modal-box input, body[data-theme="dark-grey"] #edit-product-modal-box select, body[data-theme="night"] #edit-product-modal-box select, body[data-theme="mono-dark"] #edit-product-modal-box select { background-color: #555; border: 1px solid #777; color: #eee; } body[data-theme="dark-grey"] #edit-product-modal-box input::placeholder, body[data-theme="night"] #edit-product-modal-box input::placeholder, body[data-theme="mono-dark"] #edit-product-modal-box input::placeholder { color: #aaa; }
#edit-product-modal-box #edit-product-save { background-color: var(--active-green); color: var(--text-color-dark); border-color: var(--border-color); }
body[data-theme="green"] #edit-product-save, body[data-theme="yellow"] #edit-product-save, body[data-theme="orange"] #edit-product-save { color: var(--text-color-dark); } body[data-theme="dark-grey"] #edit-product-save { color: #000; } body[data-theme="night"] #edit-product-save { color: #000; } body[data-theme="mono-dark"] #edit-product-save { color: var(--main-bg-color-mono-dark); }
body[data-theme="dark-grey"] #edit-product-modal-box .button, body[data-theme="night"] #edit-product-modal-box .button, body[data-theme="mono-dark"] #edit-product-modal-box .button { background-color: #5f5f5f; border-color: #777; color: #e0e0e0; } body[data-theme="dark-grey"] #edit-product-modal-box .button:hover:not(:active), body[data-theme="night"] #edit-product-modal-box .button:hover:not(:active), body[data-theme="mono-dark"] #edit-product-modal-box .button:hover:not(:active) { background-color: #6a6a6a; } body[data-theme="dark-grey"] #edit-product-modal-box .button:active, body[data-theme="night"] #edit-product-modal-box .button:active, body[data-theme="mono-dark"] #edit-product-modal-box .button:active { background-color: #555; }
body[data-theme="dark-grey"] #edit-product-save, body[data-theme="night"] #edit-product-save, body[data-theme="mono-dark"] #edit-product-save { background-color: var(--active-green); border-color: var(--border-color); }
/* --- End Edit Product Modal Styles --- */

/* --- START: Edit Category Modal Styles --- */
#edit-category-modal-overlay { z-index: 1160; } /* Ensure above product edit modal if somehow overlaps */
#edit-category-modal-box { width: 360px; /* Slightly smaller maybe */ max-width: 95%; /* Reuse styles from product modal */ /* Copy base styles from #edit-product-modal-box */ background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); box-shadow: 0 5px 15px rgba(0,0,0,0.3); color: var(--text-color-dark); display: flex; flex-direction: column; padding: 0; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; }
#edit-category-modal-box h3 { /* Reuse styles from product modal */ padding: 20px 25px 15px 25px; margin: 0; flex-shrink: 0; border-bottom: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); text-align: center !important; font-size: 1.4rem; color: var(--text-color-dark); font-weight: 700; -webkit-text-stroke: 0; text-stroke: 0; transition: color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] #edit-category-modal-box h3, body[data-theme="night"] #edit-category-modal-box h3, body[data-theme="mono-dark"] #edit-category-modal-box h3 { color: var(--text-color-light); border-bottom-color: color-mix(in srgb, var(--border-color) 50%, transparent); }
#edit-category-modal-box .form-box { /* Reuse styles */ padding: 20px 25px 10px 25px; margin-bottom: 0; flex-grow: 1; /* Allow some growth */ overflow-y: auto; /* Add scroll if needed, less likely than product */ }
#edit-category-modal-box label { /* Reuse styles */ display: block; margin-bottom: 3px; font-size: 0.9rem; font-weight: 600; color: var(--text-color-dark); transition: color var(--view-change-speed) ease; }
#edit-category-modal-box input { /* Reuse styles */ width: 100%; margin-bottom: 12px; padding: 8px 10px; font-size: 0.95rem; background-color: var(--lighter-blue-bg); border: 1px solid var(--border-color); color: var(--text-color-dark); border-radius: 5px; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease, box-shadow var(--fast-transition-speed) ease; }
#edit-category-modal-box input:focus { outline: none; box-shadow: 0 0 0 2px var(--active-green); border-color: var(--active-green); }
#edit-category-error { /* Reuse styles */ order: 2; padding: 0 25px 10px 25px; margin: 0; font-size: 0.85rem; flex-shrink: 0; color: red; display: none; text-align: center !important; }
#edit-category-modal-box .passcode-modal-buttons { /* Reuse styles */ order: 3; padding: 15px 25px 20px 25px; flex-shrink: 0; border-top: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); margin-top: 0; background-color: inherit; transition: border-color var(--view-change-speed) ease; }
/* Dark theme adjustments for Edit Category Modal */
body[data-theme="dark-grey"] #edit-category-modal-box label, body[data-theme="night"] #edit-category-modal-box label, body[data-theme="mono-dark"] #edit-category-modal-box label { color: #ccc; }
body[data-theme="dark-grey"] #edit-category-modal-box input, body[data-theme="night"] #edit-category-modal-box input, body[data-theme="mono-dark"] #edit-category-modal-box input { background-color: #555; border: 1px solid #777; color: #eee; }
body[data-theme="dark-grey"] #edit-category-modal-box input::placeholder, body[data-theme="night"] #edit-category-modal-box input::placeholder, body[data-theme="mono-dark"] #edit-category-modal-box input::placeholder { color: #aaa; }
#edit-category-modal-box #edit-category-save { background-color: var(--active-green); color: var(--text-color-dark); border-color: var(--border-color); }
body[data-theme="green"] #edit-category-save, body[data-theme="yellow"] #edit-category-save, body[data-theme="orange"] #edit-category-save { color: var(--text-color-dark); } body[data-theme="dark-grey"] #edit-category-save { color: #000; } body[data-theme="night"] #edit-category-save { color: #000; } body[data-theme="mono-dark"] #edit-category-save { color: var(--main-bg-color-mono-dark); }
body[data-theme="dark-grey"] #edit-category-modal-box .button, body[data-theme="night"] #edit-category-modal-box .button, body[data-theme="mono-dark"] #edit-category-modal-box .button { background-color: #5f5f5f; border-color: #777; color: #e0e0e0; } body[data-theme="dark-grey"] #edit-category-modal-box .button:hover:not(:active), body[data-theme="night"] #edit-category-modal-box .button:hover:not(:active), body[data-theme="mono-dark"] #edit-category-modal-box .button:hover:not(:active) { background-color: #6a6a6a; } body[data-theme="dark-grey"] #edit-category-modal-box .button:active, body[data-theme="night"] #edit-category-modal-box .button:active, body[data-theme="mono-dark"] #edit-category-modal-box .button:active { background-color: #555; }
body[data-theme="dark-grey"] #edit-category-save, body[data-theme="night"] #edit-category-save, body[data-theme="mono-dark"] #edit-category-save { background-color: var(--active-green); border-color: var(--border-color); }
/* --- END: Edit Category Modal Styles --- */


/* --- START: Product Management Styles (Screen 9 REVISED) --- */
#goto-product-mgmt-button { border-color: #1e7e34; background-color: #28a745; color: #fff; }
#goto-product-mgmt-button:hover { background-color: #218838; border-color: #1e7e34; }
body[data-theme="dark-grey"] #goto-product-mgmt-button, body[data-theme="night"] #goto-product-mgmt-button, body[data-theme="mono-dark"] #goto-product-mgmt-button { background-color: #54A265; border-color: #3B824A; color: #fff; }
body[data-theme="dark-grey"] #goto-product-mgmt-button:hover, body[data-theme="night"] #goto-product-mgmt-button:hover, body[data-theme="mono-dark"] #goto-product-mgmt-button:hover { background-color: #479157; }
#screen-9 .management-container { gap: 15px; }
.view-container { width: 100%; display: none; flex-direction: column; flex-grow: 1; }
.view-container.active { display: flex; animation: fadeInView 0.4s ease-out forwards; }
@keyframes fadeInView { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
#category-view-container h4, #product-view-container h4 { font-size: 1.5rem; margin-bottom: 10px; color: var(--text-color-dark); -webkit-text-stroke: none; text-stroke: none; text-align: center; padding-bottom: 8px; border-bottom: 1px solid color-mix(in srgb, var(--border-color) 60%, transparent); transition: color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] #category-view-container h4, body[data-theme="dark-grey"] #product-view-container h4, body[data-theme="night"] #category-view-container h4, body[data-theme="night"] #product-view-container h4, body[data-theme="mono-dark"] #category-view-container h4, body[data-theme="mono-dark"] #product-view-container h4 { color: var(--text-color-light); }
.drag-hint { font-size: 0.85rem; color: var(--text-color-dark); opacity: 0.7; text-align: center; margin-top: -5px; margin-bottom: 15px; transition: color var(--view-change-speed) ease; }
body[data-theme="dark-grey"] .drag-hint, body[data-theme="night"] .drag-hint, body[data-theme="mono-dark"] .drag-hint { color: var(--text-color-dark); }
.scrollable-list { flex-grow: 1; overflow-y: auto; border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 10px; background-color: rgba(255, 255, 255, 0.05); transition: border-color var(--view-change-speed) ease; min-height: 200px; }
.category-list-container { display: flex; flex-direction: column; gap: 10px; }
.category-list-item { display: flex; align-items: center; justify-content: space-between; gap: 10px; background-color: var(--lighter-blue-bg); border: var(--border-thickness) solid var(--border-color); border-radius: 5px; padding: 12px 15px; cursor: pointer; transition: background-color var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, transform var(--fast-transition-speed) ease, box-shadow var(--fast-transition-speed) ease; position: relative; }
.category-list-item:hover { background-color: color-mix(in srgb, var(--lighter-blue-bg) 80%, white); box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
.category-list-item .category-name { font-size: 1.1rem; font-weight: 600; color: var(--text-color-dark); flex-grow: 1; transition: color var(--view-change-speed) ease; text-transform: capitalize; }
/* NEW Category Actions Container */
.category-actions { display: flex; align-items: center; gap: 8px; flex-shrink: 0; }
.category-actions .button.action-button { padding: 4px 6px; font-size: 0.75rem; min-width: 26px; margin: 0; border-radius: 3px; background-color: rgba(0,0,0,0.1); border: 1px solid rgba(0,0,0,0.2); color: var(--text-color-dark); opacity: 0.8; transition: opacity 0.2s ease, background-color 0.2s ease; }
.category-list-item:hover .category-actions .button.action-button { opacity: 1; }
.category-actions .button.action-button:hover { background-color: rgba(0,0,0,0.2); }
.category-actions .button.action-button i { font-size: 0.9em; margin: 0; vertical-align: middle; }
.category-actions .drag-handle { cursor: grab; color: var(--text-color-dark); opacity: 0.6; font-size: 1.2rem; padding: 0 5px; margin-left: 5px; /* Space between buttons and handle */ }
.category-actions .drag-handle:active { cursor: grabbing; }
html[lang="ar"] .category-actions { order: -1; } html[lang="ar"] .category-actions .drag-handle { margin-left: 0; margin-right: 5px; }
body[data-theme="dark-grey"] .category-actions .drag-handle, body[data-theme="night"] .category-actions .drag-handle, body[data-theme="mono-dark"] .category-actions .drag-handle { color: var(--text-color-dark); opacity: 0.8; }
body[data-theme="dark-grey"] .category-actions .button.action-button, body[data-theme="night"] .category-actions .button.action-button, body[data-theme="mono-dark"] .category-actions .button.action-button { background-color: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); color: var(--text-color-dark); }
body[data-theme="dark-grey"] .category-actions .button.action-button:hover, body[data-theme="night"] .category-actions .button.action-button:hover, body[data-theme="mono-dark"] .category-actions .button.action-button:hover { background-color: rgba(255,255,255,0.2); }


.product-grid-container { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding-bottom: 10px; }
.product-grid-item-admin { background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 10px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: space-between; box-sizing: border-box; cursor: grab; transition: transform var(--fast-transition-speed) ease, box-shadow var(--fast-transition-speed) ease, background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; position: relative; }
.product-grid-item-admin:active { cursor: grabbing; }
.product-grid-item-admin img { width: 100%; aspect-ratio: 4 / 3; object-fit: cover; border-radius: 5px; margin-bottom: 8px; border: 1px solid rgba(0,0,0,0.1); background-color: #eee; pointer-events: none; }
.product-grid-item-admin .product-name-admin { margin: 0 0 8px 0; font-size: 0.95rem; font-weight: 600; color: var(--text-color-dark); pointer-events: none; text-align: center; transition: color var(--view-change-speed) ease; white-space: normal; overflow-wrap: break-word; line-height: 1.3; }
.product-grid-item-admin .product-price-admin { font-size: 0.9rem; font-weight: 700; color: var(--text-color-dark); margin-bottom: 10px; transition: color var(--view-change-speed) ease; }
.product-grid-item-admin .admin-actions-overlay { position: absolute; top: 5px; right: 5px; display: flex; flex-direction: column; gap: 5px; background-color: rgba(0, 0, 0, 0.3); padding: 5px; border-radius: 4px; opacity: 0; transition: opacity 0.2s ease-in-out; z-index: 5; }
html[lang="ar"] .product-grid-item-admin .admin-actions-overlay { right: auto; left: 5px; }
.product-grid-item-admin:hover .admin-actions-overlay { opacity: 1; }
.product-grid-item-admin .admin-actions-overlay .button.action-button { padding: 4px 6px; font-size: 0.75rem; min-width: 26px; margin: 0; border-radius: 3px; }
.product-grid-item-admin .admin-actions-overlay .button.action-button i { font-size: 0.9em; }
/* Drag and Drop Visuals */
.dragging { opacity: 0.5; border-style: dashed !important; }
.dragging-over { background-color: color-mix(in srgb, var(--active-green) 30%, transparent) !important; box-shadow: inset 0 0 0 2px var(--active-green); }

/* Add Product Form Container & Add Category Form */
#add-product-form-container, .add-category-form {
    width: 100%;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    text-align: center; /* Center inline-block children like the button */
}
#add-product-form-container h5, .add-category-form h5 { font-size: 1.2rem; margin-bottom: 15px; color: var(--text-color-dark); text-align: center; transition: color var(--view-change-speed) ease; }
#add-product-form-container h5 #add-product-category-name { font-weight: bold; text-transform: capitalize; }
body[data-theme="dark-grey"] #add-product-form-container h5, body[data-theme="dark-grey"] .add-category-form h5, body[data-theme="night"] #add-product-form-container h5, body[data-theme="night"] .add-category-form h5, body[data-theme="mono-dark"] #add-product-form-container h5, body[data-theme="mono-dark"] .add-category-form h5 { color: var(--text-color-light); }
/* Default layout for forms (stacking) */
#add-product-form-container .form-box, .add-category-form .form-box { display: flex; flex-direction: column; gap: 0; text-align: left; /* Reset text-align for form content */ }
html[lang="ar"] #add-product-form-container .form-box, html[lang="ar"] .add-category-form .form-box { text-align: right; /* Reset text-align for form content in RTL */ }
#add-product-form-container label, .add-category-form label { text-align: left; margin-bottom: 3px; font-size: 0.9rem; }
html[lang="ar"] #add-product-form-container label, html[lang="ar"] .add-category-form label { text-align: right; }
#add-product-form-container input, #add-product-form-container select, .add-category-form input { margin-bottom: 12px; }
.add-category-form .form-box { max-width: 450px; margin-left: auto; margin-right: auto; }
.add-category-form #add-new-category-button { margin-left: auto; margin-right: auto; display: inline-block; /* Changed from block */ }

/* Center the Add Product button specifically */
#add-product-form-container #add-new-product-button {
    display: inline-block; /* Make it inline-block to respect text-align center */
    margin-top: 20px; /* Add some space above */
    width: auto; /* Ensure it takes only necessary width */
    /* Remove grid properties inherited from media query if needed */
    grid-column: auto;
    justify-self: auto;
}


/* Specific Theme Adjustments for product mgmt */
body[data-theme="dark-grey"] .category-list-item, body[data-theme="night"] .category-list-item, body[data-theme="mono-dark"] .category-list-item { background-color: var(--lighter-blue-bg); }
body[data-theme="dark-grey"] .category-name, body[data-theme="night"] .category-name, body[data-theme="mono-dark"] .category-name { color: var(--text-color-dark); }
/* --- END: Product Management Styles --- */


/* --- START: Fixes for Monochrome Dark Text Visibility --- */
body[data-theme="mono-dark"] .cart-badge { color: var(--main-bg-color-mono-dark); border-color: var(--text-color-dark-mono-dark); }
body[data-theme="mono-dark"] .add-to-cart-preview-button { color: var(--main-bg-color-mono-dark); }
body[data-theme="mono-dark"] .add-to-cart-preview-button:hover:not(:active) { background-color: #e0e0e0; color: var(--main-bg-color-mono-dark); }
 body[data-theme="mono-dark"] .add-to-cart-preview-button.added { color: var(--main-bg-color-mono-dark); background-color: var(--pending-orange-mono-dark); }
 body[data-theme="mono-dark"] .add-to-cart-preview-button.added:hover:not(:active) { background-color: color-mix(in srgb, var(--pending-orange-mono-dark) 80%, white); color: var(--main-bg-color-mono-dark); }
body[data-theme="mono-dark"] .sort-button.active, body[data-theme="mono-dark"] .payment-button.active { color: var(--main-bg-color-mono-dark); }
 body[data-theme="mono-dark"] .status-button.active { color: var(--main-bg-color-mono-dark); }
 body[data-theme="mono-dark"] .order-log-item.active { color: var(--main-bg-color-mono-dark); }
 body[data-theme="mono-dark"] .order-log-item.active span:not(.order-status) { color: inherit; }
body[data-theme="mono-dark"] #goto-admin-login-button { color: #000000 !important; border-color: #000000; }
body[data-theme="mono-dark"] #goto-admin-login-button:hover { color: #000000 !important; background-color: #ffda63 !important; }
body[data-theme="mono-dark"] #discover-button { color: #000000 !important; border-color: #000000; }
body[data-theme="mono-dark"] #discover-button:hover { color: #000000 !important; background-color: #ffda63 !important; }
body[data-theme="mono-dark"] .remove-item-button { background-color: var(--remove-red-mono-dark); color: var(--main-bg-color-mono-dark); border-color: var(--text-color-dark-mono-dark); }
body[data-theme="mono-dark"] .remove-item-button:hover { background-color: color-mix(in srgb, var(--remove-red-mono-dark) 80%, black); }

/* Product Management dark fixes */
body[data-theme="mono-dark"] .category-name { color: #000; }
body[data-theme="mono-dark"] .category-list-item .drag-handle { color: #000; }
body[data-theme="mono-dark"] .product-name-admin, body[data-theme="mono-dark"] .product-price-admin { color: var(--text-color-light-mono-dark); }
body[data-theme="mono-dark"] .add-category-form h5 { color: var(--text-color-light); }
/* --- END: Fixes for Monochrome Dark Text Visibility --- */

/* Management/Discover Button Text Color Fix for Yellow/Orange Theme */
body[data-theme="yellow"] #goto-admin-login-button, body[data-theme="orange"] #goto-admin-login-button, body[data-theme="yellow"] #discover-button, body[data-theme="orange"] #discover-button { color: #000 !important; }
body[data-theme="yellow"] #goto-admin-login-button:hover, body[data-theme="orange"] #goto-admin-login-button:hover, body[data-theme="yellow"] #discover-button:hover, body[data-theme="orange"] #discover-button:hover { color: #000 !important; }


/* Fixed Buttons Positioning Update & RTL */
.fixed-button { position: fixed; bottom: 15px; z-index: 1000; background-color: rgba(0, 0, 0, 0.5); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; padding: 0; cursor: pointer; font-size: 1.1rem; line-height: 40px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.3); transition: background-color 0.2s ease, transform 0.2s ease; user-select: none; }
.fixed-button:hover { background-color: rgba(0, 0, 0, 0.7); transform: scale(1.1); } .fixed-button:active { transform: scale(0.95); }
#toggle-fullscreen-btn { right: 15px; left: auto; }
#settings-btn { right: 65px; left: auto; font-size: 1.2rem; }
@media print { #toggle-fullscreen-btn, #settings-btn { display: none; } }

/* Discovery Mode Styles */
#screen-8 .screen-content { gap: 45px; }
.discovery-section { width: 100%; background-color: transparent; border: none; border-radius: 0; padding: 0; }
.discovery-section h4 { font-size: 1.5rem; margin-top: 0; margin-bottom: 20px; color: var(--text-color-dark); -webkit-text-stroke: none; text-stroke: none; text-align: center; border-bottom: 2px solid var(--border-color); padding-bottom: 12px; font-weight: 700; }
body[data-theme="light-blue"] .discovery-section h4, body[data-theme="mono-light"] .discovery-section h4, body[data-theme="yellow"] .discovery-section h4, body[data-theme="orange"] .discovery-section h4 { color: var(--text-color-dark); border-bottom-color: color-mix(in srgb, var(--border-color) 80%, transparent); }
body[data-theme="dark-grey"] .discovery-section h4, body[data-theme="night"] .discovery-section h4, body[data-theme="mono-dark"] .discovery-section h4 { color: var(--text-color-light); border-bottom-color: color-mix(in srgb, var(--border-color) 70%, transparent); }
.discovery-offers-scroller { display: flex; overflow-x: auto; padding: 10px 5px 20px 5px; gap: 20px; scrollbar-width: thin; scrollbar-color: rgba(0,0,0,0.2) transparent; margin: 0 -20px; padding-left: 20px; padding-right: 20px; scroll-snap-type: x mandatory; }
html[lang="ar"] .discovery-offers-scroller { direction: rtl; }
.discovery-offers-scroller::-webkit-scrollbar { height: 8px; } .discovery-offers-scroller::-webkit-scrollbar-track { background: transparent; } .discovery-offers-scroller::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.25); border-radius: 10px; }
body[data-theme="dark-grey"] .discovery-offers-scroller::-webkit-scrollbar-thumb, body[data-theme="night"] .discovery-offers-scroller::-webkit-scrollbar-thumb, body[data-theme="mono-dark"] .discovery-offers-scroller::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.25); }
.offer-card { flex: 0 0 85%; max-width: 320px; background: linear-gradient(135deg, color-mix(in srgb, var(--lighter-blue-bg) 95%, black 5%), color-mix(in srgb, var(--main-bg-color) 80%, black 10%)); border: var(--border-thickness) solid var(--border-color); border-radius: 15px; padding: 18px; transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, box-shadow var(--fast-transition-speed) ease, background var(--view-change-speed) ease; position: relative; box-shadow: 0 5px 15px rgba(0,0,0,0.12); display: flex; flex-direction: column; scroll-snap-align: center; }
body[data-theme="mono-light"] .offer-card { background: linear-gradient(135deg, #fff, #eee); }
body[data-theme="mono-dark"] .offer-card { background: linear-gradient(135deg, #333, #1a1a1a); }
body[data-theme="light-blue"] .offer-card { background: linear-gradient(135deg, #F8FBFF, #E3F2FD); }
.offer-card:hover { box-shadow: 0 8px 20px rgba(0,0,0,0.18); transform: translateY(-2px); }
.offer-card h5 { margin: 0 0 12px 0; font-size: 1.25rem; font-weight: 700; color: var(--text-color-dark); transition: color var(--view-change-speed) ease; line-height: 1.3; }
.offer-image-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 15px; max-height: 120px; overflow: hidden; }
.offer-image-grid.count-1 { grid-template-columns: 1fr; max-height: 80px; } .offer-image-grid.count-3 { grid-template-columns: repeat(3, 1fr); max-height: 60px; } .offer-image-grid.count-4 { grid-template-columns: repeat(2, 1fr); }
.offer-image-grid img { width: 100%; aspect-ratio: 4 / 3; object-fit: cover; border-radius: 6px; border: 1px solid rgba(0,0,0,0.1); background-color: #eee; -webkit-mask-image: linear-gradient(to bottom, black 60%, transparent 100%); mask-image: linear-gradient(to bottom, black 60%, transparent 100%); }
.offer-card p.offer-description { margin: 0 0 15px 0; font-size: 0.9rem; color: var(--text-color-dark); line-height: 1.5; transition: color var(--view-change-speed) ease; }
.offer-card .offer-items { margin-bottom: 15px; font-size: 0.9rem; color: var(--text-color-dark); font-weight: 600; transition: color var(--view-change-speed) ease; line-height: 1.6; }
.offer-card .offer-items span { display: inline-block; background-color: color-mix(in srgb, var(--button-bg-color) 70%, #000000 5%); padding: 3px 9px; border-radius: var(--pill-border-radius); margin-right: 6px; margin-bottom: 6px; font-weight: 600; border: 1px solid color-mix(in srgb, var(--border-color) 60%, transparent); transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; }
body[data-theme="light-blue"] .offer-items span, body[data-theme="mono-light"] .offer-items span, body[data-theme="yellow"] .offer-items span, body[data-theme="orange"] .offer-items span { color: var(--text-color-dark); }
body[data-theme="dark-grey"] .offer-items span, body[data-theme="night"] .offer-items span, body[data-theme="mono-dark"] .offer-items span { color: var(--text-color-dark); background-color: color-mix(in srgb, var(--button-bg-color) 70%, #ffffff 5%); }
.offer-actions { margin-top: auto; padding-top: 12px; border-top: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); }
.bundle-pricing { display: flex; justify-content: space-between; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 15px; }
.bundle-original-price { font-size: 0.9rem; color: var(--remove-red); text-decoration: line-through; font-weight: 600; }
.bundle-final-price { font-size: 1.15rem; font-weight: 700; color: var(--active-green); padding: 4px 10px; background-color: color-mix(in srgb, var(--active-green) 15%, transparent); border-radius: var(--element-border-radius); }
body[data-theme="green"] .bundle-final-price, body[data-theme="yellow"] .bundle-final-price, body[data-theme="orange"] .bundle-final-price { color: var(--text-color-dark); background-color: color-mix(in srgb, var(--active-green) 80%, white); }
body[data-theme="mono-dark"] .bundle-final-price { color: var(--main-bg-color-mono-dark); background-color: color-mix(in srgb, var(--active-green) 80%, black); }
body[data-theme="dark-grey"] .bundle-original-price, body[data-theme="orange"] .bundle-original-price { color: #ef9a9a; }
body[data-theme="mono-dark"] .bundle-original-price { color: var(--remove-red-mono-dark); }
.add-bundle-button, .add-suggestion-button { display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; margin-top: 0; padding: 10px 15px; font-size: 1rem; font-weight: 700; border-color: var(--border-color); border-radius: var(--element-border-radius); border: var(--border-thickness) solid var(--border-color); cursor: pointer; text-align: center; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; user-select: none; font-family: inherit; }
 .add-bundle-button { background-color: var(--active-green); color: var(--text-color-dark); }
.add-suggestion-button { background-color: var(--button-bg-color); color: var(--text-color-dark); }
.add-suggestion-button:hover:not(:active) { background-color: color-mix(in srgb, var(--button-bg-color) 80%, white); }
.add-bundle-button:hover:not(:active) { background-color: color-mix(in srgb, var(--active-green) 80%, white); }
.add-bundle-button:active, .add-suggestion-button:active { transform: scale(0.96); }
body[data-theme="green"] .add-bundle-button, body[data-theme="green"] .add-suggestion-button, body[data-theme="yellow"] .add-bundle-button, body[data-theme="yellow"] .add-suggestion-button, body[data-theme="orange"] .add-bundle-button, body[data-theme="orange"] .add-suggestion-button { color: var(--text-color-dark); }
body[data-theme="mono-dark"] .add-bundle-button, body[data-theme="mono-dark"] .add-suggestion-button { color: var(--main-bg-color-mono-dark); }
body[data-theme="mono-dark"] .add-suggestion-button { background-color: var(--button-bg-color-mono-dark); }
.add-bundle-button.added, .add-suggestion-button.added { background-color: var(--pending-orange); color: var(--text-color-dark); }
body[data-theme="yellow"] .add-bundle-button.added, body[data-theme="yellow"] .add-suggestion-button.added { background-color: var(--pending-orange-yellow); color: var(--text-color-dark-yellow); }
body[data-theme="orange"] .add-bundle-button.added, body[data-theme="orange"] .add-suggestion-button.added { background-color: var(--pending-orange-orange); color: var(--text-color-dark-orange); }
body[data-theme="mono-dark"] .add-bundle-button.added, body[data-theme="mono-dark"] .add-suggestion-button.added { background-color: var(--pending-orange-mono-dark); color: var(--main-bg-color-mono-dark); }
.bundle-discount-tag { position: absolute; top: -10px; right: 10px; background-color: var(--remove-red); color: white; padding: 3px 8px; font-size: 0.8rem; font-weight: 700; border-radius: var(--pill-border-radius); transform: rotate(5deg); border: 1px solid var(--border-color); box-shadow: 1px 1px 3px rgba(0,0,0,0.2); z-index: 1; }
body[data-theme="dark-grey"] .bundle-discount-tag, body[data-theme="orange"] .bundle-discount-tag { color: var(--text-color-dark); }
body[data-theme="mono-dark"] .bundle-discount-tag { background-color: var(--remove-red-mono-dark); color: var(--main-bg-color-mono-dark); border-color: var(--text-color-dark-mono-dark); }
.discovery-suggestions-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap: 20px; }
@media (min-width: 600px) { .discovery-suggestions-grid { grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); } }
.suggestion-grid-item { background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 15px; display: flex; flex-direction: column; transition: transform var(--fast-transition-speed) ease, box-shadow var(--fast-transition-speed) ease, background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; box-shadow: 0 2px 6px rgba(0,0,0,0.08); position: relative; }
.suggestion-grid-item:hover { transform: translateY(-3px); box-shadow: 0 5px 12px rgba(0,0,0,0.12); }
.suggestion-item-images { display: flex; align-items: center; justify-content: center; gap: 5px; margin-bottom: 15px; flex-wrap: wrap; min-height: 50px; }
.suggestion-item-images img { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 1px solid color-mix(in srgb, var(--border-color) 50%, transparent); background-color: #eee; }
.suggestion-item-images .plus-separator { font-size: 1.3rem; font-weight: 600; color: var(--text-color-dark); transition: color var(--view-change-speed) ease; padding: 0 2px; }
body[data-theme="dark-grey"] .suggestion-item-images .plus-separator, body[data-theme="night"] .suggestion-item-images .plus-separator, body[data-theme="mono-dark"] .suggestion-item-images .plus-separator { color: var(--text-color-light); }
.suggestion-grid-item h5 { margin: 0 0 10px 0; font-size: 1.15rem; font-weight: 700; color: var(--text-color-dark); text-align: center; transition: color var(--view-change-speed) ease; }
.suggestion-grid-item .suggestion-items { margin-bottom: 15px; text-align: center; font-size: 0.9rem; line-height: 1.7; flex-grow: 1; }
.suggestion-grid-item .suggestion-items span { display: inline-block; background-color: color-mix(in srgb, var(--button-bg-color) 70%, #000000 5%); padding: 3px 9px; border-radius: var(--pill-border-radius); margin: 3px; font-weight: 600; color: var(--text-color-dark); border: 1px solid color-mix(in srgb, var(--border-color) 60%, transparent); transition: background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; }
body[data-theme="light-blue"] .suggestion-items span, body[data-theme="mono-light"] .suggestion-items span, body[data-theme="yellow"] .suggestion-items span, body[data-theme="orange"] .suggestion-items span { color: var(--text-color-dark); }
body[data-theme="dark-grey"] .suggestion-items span, body[data-theme="night"] .suggestion-items span, body[data-theme="mono-dark"] .suggestion-items span { color: var(--text-color-dark); background-color: color-mix(in srgb, var(--button-bg-color) 70%, #ffffff 5%); }
.suggestion-total-price { font-size: 1rem; font-weight: 700; color: var(--text-color-dark); text-align: center; margin-bottom: 15px; padding-top: 10px; border-top: 1px dashed color-mix(in srgb, var(--border-color) 50%, transparent); transition: color var(--view-change-speed) ease; }
.suggestion-total-price strong { margin-right: 5px; } html[lang="ar"] .suggestion-total-price strong { margin-left: 5px; margin-right: 0; }
body[data-theme="dark-grey"] .suggestion-total-price, body[data-theme="night"] .suggestion-total-price, body[data-theme="mono-dark"] .suggestion-total-price { color: var(--text-color-light); }
.suggestion-grid-item .add-suggestion-button { margin-top: auto; padding: 10px 15px; }
.discovery-categories-container { width: 100%; display: flex; flex-direction: column; gap: 35px; }
.discovery-category-section { width: 100%; }
.discovery-category-section h5 { font-size: 1.4rem; color: var(--text-color-dark); margin: 0 0 18px 0; padding-bottom: 10px; border-bottom: 1px solid color-mix(in srgb, var(--border-color) 70%, transparent); font-weight: 700; text-align: left; transition: color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; }
html[lang="ar"] .discovery-category-section h5 { text-align: right; }
body[data-theme="dark-grey"] .discovery-category-section h5, body[data-theme="night"] .discovery-category-section h5, body[data-theme="mono-dark"] .discovery-category-section h5 { color: var(--text-color-light); }
.discovery-category-grid { display: flex; overflow-x: auto; padding-bottom: 15px; gap: 15px; scrollbar-width: thin; scrollbar-color: rgba(0,0,0,0.2) transparent; margin: 0 -15px; padding-left: 15px; padding-right: 15px; }
html[lang="ar"] .discovery-category-grid { direction: rtl; }
.discovery-category-grid::-webkit-scrollbar { height: 6px; } .discovery-category-grid::-webkit-scrollbar-track { background: transparent; } .discovery-category-grid::-webkit-scrollbar-thumb { background-color: rgba(0, 0, 0, 0.2); border-radius: 10px; }
body[data-theme="dark-grey"] .discovery-category-grid::-webkit-scrollbar-thumb, body[data-theme="night"] .discovery-category-grid::-webkit-scrollbar-thumb, body[data-theme="mono-dark"] .discovery-category-grid::-webkit-scrollbar-thumb { background-color: rgba(255, 255, 255, 0.2); }
.discovery-category-item { flex: 0 0 150px; background-color: var(--main-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--element-border-radius); padding: 12px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: space-between; box-sizing: border-box; cursor: pointer; transition: transform var(--fast-transition-speed) ease, box-shadow var(--fast-transition-speed) ease, background-color var(--view-change-speed) ease, border-color var(--view-change-speed) ease; }
.discovery-category-item:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
.discovery-category-item:active { transform: scale(0.98) translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.discovery-category-item img { width: 100%; aspect-ratio: 4 / 3; object-fit: cover; border-radius: 5px; margin-bottom: 10px; border: 1px solid rgba(0,0,0,0.1); background-color: #eee; pointer-events: none; -webkit-mask-image: none; mask-image: none; }
.discovery-category-item p { margin: 0 0 10px 0; font-size: 1rem; font-weight: 600; color: var(--text-color-dark); pointer-events: none; text-align: center; transition: color var(--view-change-speed) ease;}
.discovery-category-item .price-button { background-color: var(--button-bg-color); border: var(--border-thickness) solid var(--border-color); border-radius: var(--pill-border-radius); padding: 5px 15px; font-size: 0.9rem; font-weight: 700; color: var(--text-color-dark); display: inline-block; transition: background-color var(--fast-transition-speed) ease, transform var(--fast-transition-speed) ease, border-color var(--view-change-speed) ease, color var(--view-change-speed) ease; pointer-events: auto; user-select: none; z-index: 5; position: relative; font-family: inherit; }
.discovery-category-item .price-button:active { transform: scale(0.95); background-color: color-mix(in srgb, var(--button-bg-color) 60%, white); }

/* Cart Badge Styles */
#cart-badge-preview, #cart-badge-discovery { position: absolute; top: -5px; right: -5px; background-color: var(--active-green); color: var(--text-color-light); border-radius: 50%; width: 22px; height: 22px; font-size: 0.8rem; font-weight: 700; display: none; justify-content: center; align-items: center; border: 1px solid var(--border-color); transform-origin: center; animation: pulseBadge 1.5s infinite ease-in-out; transition: background-color var(--view-change-speed) ease, color var(--view-change-speed) ease, border-color var(--view-change-speed) ease, opacity 0.2s ease; }
 #cart-badge-preview.visible, #cart-badge-discovery.visible { display: flex; }
 html[lang="ar"] #cart-badge-preview, html[lang="ar"] #cart-badge-discovery { left: -5px; right: auto; }
 body[data-theme="green"] #cart-badge-preview, body[data-theme="green"] #cart-badge-discovery, body[data-theme="yellow"] #cart-badge-preview, body[data-theme="yellow"] #cart-badge-discovery, body[data-theme="orange"] #cart-badge-preview, body[data-theme="orange"] #cart-badge-discovery { color: var(--text-color-dark); }
 body[data-theme="mono-dark"] #cart-badge-preview, body[data-theme="mono-dark"] #cart-badge-discovery { color: var(--main-bg-color-mono-dark); border-color: var(--text-color-dark-mono-dark); }

/* Media Queries */
@media (min-width: 600px) {
     html { font-size: 17px; } body:not(.full-screen-mode) { padding: 30px 20px; } .app-container:not(body.full-screen-mode *) { max-width: 500px; border-radius: 45px; min-height: 650px; } .screen { padding: 30px 30px; } .screen-content { padding-bottom: 80px; } .header { margin-bottom: 40px; min-height: 70px; } .header-button { padding: 10px 15px; } .cart-icon, .user-icon { width: 50px; height: 50px; font-size: 1.8rem; } .menu-grid { gap: 20px; grid-template-columns: repeat(3, 1fr); } .cart-item img { width: 75px; height: 75px; } .item-details { margin-right: 35px; } html[lang="ar"] .item-details { margin-left: 35px; margin-right: 10px; } .remove-item-button { width: 22px; height: 22px; font-size: 0.9rem; line-height: 20px; } .total-calculation { max-height: 100px; } .preview-image { max-width: 280px; } .preview-name { font-size: 1.9rem; } .preview-description { font-size: 1rem; max-width: 600px; } .preview-price { font-size: 1.4rem; } .add-to-cart-preview-button { max-width: 280px; font-size: 1.3rem; } .order-log-container { max-height: 250px; } .order-preview-section { min-height: 200px; }
    .discovery-offers-scroller { gap: 25px; }
    .offer-card { flex-basis: 75%; max-width: 340px; }
    .discovery-suggestions-grid { grid-template-columns: repeat(auto-fit, minmax(210px, 1fr)); }
    .discovery-category-item { flex-basis: 170px; padding: 15px; }
    .discovery-section h4 { font-size: 1.6rem; }
    .discovery-category-section h5 { font-size: 1.4rem; }
    .suggestion-item-images { min-height: 55px; }
    .suggestion-item-images img { width: 50px; height: 50px; }
    .suggestion-item-images .plus-separator { font-size: 1.4rem; }
    /* Product Management Adjustments */
    .product-grid-container {
        grid-template-columns: repeat(3, 1fr); /* 3 columns */
        gap: 20px;
    }
    #add-product-form-container, .add-category-form {
        padding-left: 15px;
        padding-right: 15px;
    }
}
@media (min-width: 992px) {
     html { font-size: 18px; } body:not(.full-screen-mode) { padding: 40px 30px; align-items: center; } .app-container:not(body.full-screen-mode *) { max-width: 800px; min-height: 700px; border-radius: 50px; } .screen { padding: 35px 40px; } .screen-content { padding-bottom: 90px; } h2 { font-size: 2.5rem; } h4 { font-size: 2rem; } #screen-5 h4 { font-size: 1.7rem; } .menu-grid { grid-template-columns: repeat(3, 1fr); gap: 30px; } .cart-total { gap: 10px; } .total-calculation { max-height: 120px; } .item-preview-container { padding-top: 20px; } .preview-image { max-width: 350px; } .preview-name { font-size: 2.2rem; } .preview-description { font-size: 1.1rem; max-width: 700px; } .preview-price { font-size: 1.5rem; padding: 8px 25px; } .add-to-cart-preview-button { max-width: 320px; padding: 14px 25px; font-size: 1.4rem; } .management-container { gap: 30px; } .order-management-layout { flex-direction: row; align-items: flex-start; gap: 25px; width: 100%; } html[lang="ar"] .order-management-layout { flex-direction: row-reverse; } .order-log-section { flex: 1 1 45%; } .order-log-container { max-height: 420px; } .order-preview-section { flex: 1 1 55%; min-height: 420px; } .order-preview-content { font-size: 1rem; }
     #screen-8 .screen-content { gap: 60px; }
     .discovery-offers-scroller { gap: 30px; }
     .offer-card { flex-basis: 65%; max-width: 380px; }
     .discovery-suggestions-grid { grid-template-columns: repeat(auto-fit, minmax(230px, 1fr)); gap: 25px; }
     .discovery-category-item { flex-basis: 190px; }
     .suggestion-item-images { min-height: 60px; }
     .suggestion-item-images img { width: 55px; height: 55px; }
     .suggestion-item-images .plus-separator { font-size: 1.5rem; }

     /* Product & Category Management 992px+ */
     .scrollable-list {
         max-height: calc(100vh - 280px); /* Adjust max height */
     }
     #category-view-container .scrollable-list {
          max-height: calc(100vh - 200px); /* Allow more height for categories */
     }
     .category-list-item .category-name { font-size: 1.2rem; }

     .product-grid-container {
         grid-template-columns: repeat(3, 1fr); /* 3 columns */
         gap: 25px;
     }
      /* Add Product Form Grid Layout */
     #add-product-form-container .form-box {
         display: grid;
         grid-template-columns: repeat(2, 1fr);
         gap: 15px 20px;
         align-items: center;
         text-align: left; /* Ensure grid content is left-aligned */
      }
      html[lang="ar"] #add-product-form-container .form-box { text-align: right; }
      #add-product-form-container label {
          margin-bottom: 0;
          text-align: right;
      }
      html[lang="ar"] #add-product-form-container label { text-align: left; }
      #add-product-form-container input, #add-product-form-container select {
          margin-bottom: 0;
      }
      #add-product-form-container .error-message { grid-column: 1 / -1; }
      #add-product-form-container #add-new-product-button {
          grid-column: 1 / -1;
          justify-self: center; /* Center button within the grid container */
          display: inline-block; /* Override default block button */
          width: auto; /* Let content size button */
      }

      /* Optional: Add Category Form Grid Layout */
      .add-category-form .form-box {
         display: grid;
         grid-template-columns: repeat(2, 1fr);
         gap: 15px 20px;
         align-items: center;
         text-align: left; /* Ensure grid content is left-aligned */
      }
      html[lang="ar"] .add-category-form .form-box { text-align: right; }
      .add-category-form label {
          margin-bottom: 0;
          text-align: right;
      }
      html[lang="ar"] .add-category-form label { text-align: left; }
      .add-category-form input { margin-bottom: 0; }
      .add-category-form .error-message { grid-column: 1 / -1; }
      .add-category-form #add-new-category-button {
          grid-column: 1 / -1;
          justify-self: center; /* Center button */
      }

} /* End 992px */
@media (min-width: 1200px) {
     .app-container:not(body.full-screen-mode *) { max-width: 900px; } .screen { padding-left: 50px; padding-right: 50px; } .menu-grid { grid-template-columns: repeat(4, 1fr); gap: 30px; } .order-log-container { max-height: 500px; } .order-preview-section { min-height: 500px; }
      .offer-card { flex-basis: 55%; max-width: 400px; }
     .discovery-suggestions-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
     .discovery-category-item { flex-basis: 210px; }
     .suggestion-item-images { min-height: 65px; }
     .suggestion-item-images img { width: 60px; height: 60px; }
     .suggestion-item-images .plus-separator { font-size: 1.6rem; }
     /* Product Management 1200px+ */
     .scrollable-list {
          max-height: calc(100vh - 260px);
      }
      #category-view-container .scrollable-list {
          max-height: calc(100vh - 180px);
      }
     .product-grid-container {
         grid-template-columns: repeat(4, 1fr); /* 4 columns */
     }
}
